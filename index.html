<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="邵金东的个人博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="邵金东的个人博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="邵金东的个人博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="邵金东的个人博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>邵金东的个人博客</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>
    <a href="https://github.com/leimite"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">邵金东的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">感谢关注</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/04/vue-cli的webpack模板项目配置文件分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/04/vue-cli的webpack模板项目配置文件分析/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-04T09:11:26+08:00">
                2018-04-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#vue-cli的webpack模板项目配置文件分析<br>标签： webpack 配置 vue-cli 结构 开发构建<br>date: 2018-04-04<br>tags:</p>
<p>目录(?)[-]</p>
<p>一文件结构<br>二指令分析<br>三build文件夹分析<br>builddev-serverjs<br>buildwebpackbaseconfjs<br>buildwebpackdevconfjs<br>buildutilsjs<br>buildvue-loaderconfjs<br>builddev-clientjs<br>buildbuildjs<br>buildwebpackprodconfjs<br>buildcheck-versionsjs<br>四config文件夹分析<br>configindexjs<br>configdevenvjsconfigprodenvjs和configtestenvjs<br>五总结<br>2017-09-11更新：更新到webpack 2.6.1所对应的配置，完善部分代码注释。</p>
<p>由于最近在vue-cli生成的webpack模板项目的基础上写一个小东西，开发过程中需要改动到build和config里面一些相关的配置，所以刚好趁此机会将所有配置文件看一遍，理一理思路，也便于以后修改配置的时候不会“太折腾”。</p>
<p>###一、文件结构<br>本文主要分析开发（dev）和构建（build）两个过程涉及到的文件，故下面文件结构仅列出相应的内容。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">├─build</div><div class="line">│   ├─build.js</div><div class="line">│   ├─check-versions.js</div><div class="line">│   ├─dev-client.js</div><div class="line">│   ├─dev-server.js</div><div class="line">│   ├─utils.js</div><div class="line">│   ├─vue-loader.conf.js</div><div class="line">│   ├─webpack.base.conf.js</div><div class="line">│   ├─webpack.dev.conf.js</div><div class="line">│   ├─webpack.prod.conf.js</div><div class="line">│   └─webpack.test.conf.js</div><div class="line">├─config</div><div class="line">│   ├─dev.env.js</div><div class="line">│   ├─index.js</div><div class="line">│   ├─prod.env.js</div><div class="line">│   └─test.env.js</div><div class="line">├─...</div><div class="line">└─package.json</div></pre></td></tr></table></figure></p>
<p>###二、指令分析<br>首先看package.json里面的scripts字段，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;dev&quot;: &quot;node build/dev-server.js&quot;,</div><div class="line">  &quot;build&quot;: &quot;node build/build.js&quot;,</div><div class="line">  &quot;unit&quot;: &quot;cross-env BABEL_ENV=test karma start test/unit/karma.conf.js --single-run&quot;,</div><div class="line">  &quot;e2e&quot;: &quot;node test/e2e/runner.js&quot;,</div><div class="line">  &quot;test&quot;: &quot;npm run unit &amp;&amp; npm run e2e&quot;,</div><div class="line">  &quot;lint&quot;: &quot;eslint --ext .js,.vue src test/unit/specs test/e2e/specs&quot;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>测试的东西先不看，直接看”dev”和”build”。运行”npm run dev”的时候执行的是build/dev-server.js文件，运行”npm run build”的时候执行的是build/build.js文件，我们可以从这两个文件开始进行代码阅读分析。</p>
<p>###三、build文件夹分析<br>build/dev-server.js<br>首先来看执行”npm run dev”时候最先执行的build/dev-server.js文件。该文件主要完成下面几件事情：</p>
<p>检查node和npm的版本、引入相关插件和配置<br>webpack对源码进行编译打包并返回compiler对象<br>创建express服务器<br>配置开发中间件（webpack-dev-middleware）和热重载中间件（webpack-hot-middleware）<br>挂载代理服务和中间件<br>配置静态资源<br>启动服务器监听特定端口（8080）<br>自动打开浏览器并打开特定网址（localhost:8080）<br>说明： express服务器提供静态文件服务，不过它还使用了http-proxy-middleware，一个http请求代理的中间件。前端开发过程中需要使用到后台的API的话，可以通过配置proxyTable来将相应的后台请求代理到专用的API服务器。</p>
<p>详情请看代码注释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div></pre></td><td class="code"><pre><div class="line">// 检查NodeJS和npm的版本</div><div class="line">require(&apos;./check-versions&apos;)()</div><div class="line"></div><div class="line">// 获取基本配置</div><div class="line">var config = require(&apos;../config&apos;)</div><div class="line">// 如果Node的环境变量中没有设置当前的环境（NODE_ENV），则使用config中的dev环境配置作为当前的环境</div><div class="line">if (!process.env.NODE_ENV) &#123;</div><div class="line">  process.env.NODE_ENV = JSON.parse(config.dev.env.NODE_ENV)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// opn是一个可以调用默认软件打开网址、图片、文件等内容的插件</div><div class="line">// 这里用它来调用默认浏览器打开dev-server监听的端口，例如：localhost:8080</div><div class="line">var opn = require(&apos;opn&apos;)</div><div class="line">var path = require(&apos;path&apos;)</div><div class="line">var express = require(&apos;express&apos;)</div><div class="line">var webpack = require(&apos;webpack&apos;)</div><div class="line">// http-proxy-middleware是一个express中间件，用于将http请求代理到其他服务器</div><div class="line">// 例：localhost:8080/api/xxx  --&gt;  localhost:3000/api/xxx</div><div class="line">// 这里使用该插件可以将前端开发中涉及到的请求代理到提供服务的后台服务器上，方便与服务器对接</div><div class="line">var proxyMiddleware = require(&apos;http-proxy-middleware&apos;)</div><div class="line">// 开发环境下的webpack配置</div><div class="line">var webpackConfig = require(&apos;./webpack.dev.conf&apos;)</div><div class="line"></div><div class="line">// dev-server 监听的端口，如果没有在命令行传入端口号，则使用config.dev.port设置的端口，例如8080</div><div class="line">var port = process.env.PORT || config.dev.port</div><div class="line">// 用于判断是否要自动打开浏览器的布尔变量，当配置文件中没有设置自动打开浏览器的时候其值为 false</div><div class="line">var autoOpenBrowser = !!config.dev.autoOpenBrowser</div><div class="line">// HTTP代理表，指定规则，将某些API请求代理到相应的服务器</div><div class="line">var proxyTable = config.dev.proxyTable</div><div class="line">// 创建express服务器</div><div class="line">var app = express()</div><div class="line">// webpack根据配置开始编译打包源码并返回compiler对象</div><div class="line">var compiler = webpack(webpackConfig)</div><div class="line">// webpack-dev-middleware将webpack编译打包后得到的产品文件存放在内存中而没有写进磁盘</div><div class="line">// 将这个中间件挂到express上使用之后即可提供这些编译后的产品文件服务</div><div class="line">var devMiddleware = require(&apos;webpack-dev-middleware&apos;)(compiler, &#123;</div><div class="line">  publicPath: webpackConfig.output.publicPath, // 设置访问路径为webpack配置中的output里面所对应的路径</div><div class="line">  quiet: true // 设置为true，使其不要在控制台输出日志</div><div class="line">&#125;)</div><div class="line">// webpack-hot-middleware，用于实现热重载功能的中间件</div><div class="line">var hotMiddleware = require(&apos;webpack-hot-middleware&apos;)(compiler, &#123;</div><div class="line">  log: false, // 关闭控制台的日志输出</div><div class="line">  heartbeat: 2000 // 发送心跳包的频率</div><div class="line">&#125;)</div><div class="line">// webpack(重新)编译打包完成后并将js、css等文件inject到html文件之后，通过热重载中间件强制页面刷新</div><div class="line">compiler.plugin(&apos;compilation&apos;, function (compilation) &#123;</div><div class="line">  compilation.plugin(&apos;html-webpack-plugin-after-emit&apos;, function (data, cb) &#123;</div><div class="line">    hotMiddleware.publish(&#123; action: &apos;reload&apos; &#125;)</div><div class="line">    cb()</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">// 根据 proxyTable 中的代理请求配置来设置express服务器的http代理规则</div><div class="line">Object.keys(proxyTable).forEach(function (context) &#123;</div><div class="line">  var options = proxyTable[context]</div><div class="line">  // 格式化options，例如将&apos;www.example.com&apos;变成&#123; target: &apos;www.example.com&apos; &#125;</div><div class="line">  if (typeof options === &apos;string&apos;) &#123;</div><div class="line">    options = &#123; target: options &#125;</div><div class="line">  &#125;</div><div class="line">  app.use(proxyMiddleware(options.filter || context, options))</div><div class="line">&#125;)</div><div class="line"></div><div class="line">// handle fallback for HTML5 history API</div><div class="line">// 重定向不存在的URL，用于支持SPA（单页应用）</div><div class="line">// 例如使用vue-router并开启了history模式</div><div class="line">app.use(require(&apos;connect-history-api-fallback&apos;)())</div><div class="line"></div><div class="line">// serve webpack bundle output</div><div class="line">// 挂载webpack-dev-middleware中间件，提供webpack编译打包后的产品文件服务</div><div class="line">app.use(devMiddleware)</div><div class="line"></div><div class="line">// enable hot-reload and state-preserving</div><div class="line">// compilation error display</div><div class="line">// 挂载热重载中间件</div><div class="line">app.use(hotMiddleware)</div><div class="line"></div><div class="line">// serve pure static assets</div><div class="line">// 提供static文件夹上的静态文件服务</div><div class="line">var staticPath = path.posix.join(config.dev.assetsPublicPath, config.dev.assetsSubDirectory)</div><div class="line">app.use(staticPath, express.static(&apos;./static&apos;))</div><div class="line"></div><div class="line">// 访问链接</div><div class="line">var uri = &apos;http://localhost:&apos; + port</div><div class="line"></div><div class="line">// 创建promise，在应用服务启动之后resolve</div><div class="line">// 便于外部文件require了这个dev-server之后的代码编写</div><div class="line">var _resolve</div><div class="line">var readyPromise = new Promise(resolve =&gt; &#123;</div><div class="line">  _resolve = resolve</div><div class="line">&#125;)</div><div class="line"></div><div class="line">console.log(&apos;&gt; Starting dev server...&apos;)</div><div class="line">// webpack-dev-middleware等待webpack完成所有编译打包之后输出提示语到控制台，表明服务正式启动</div><div class="line">// 服务正式启动才自动打开浏览器进入页面</div><div class="line">devMiddleware.waitUntilValid(() =&gt; &#123;</div><div class="line">  console.log(&apos;&gt; Listening at &apos; + uri + &apos;\n&apos;)</div><div class="line">  // when env is testing, don&apos;t need open it</div><div class="line">  if (autoOpenBrowser &amp;&amp; process.env.NODE_ENV !== &apos;testing&apos;) &#123;</div><div class="line">    opn(uri)</div><div class="line">  &#125;</div><div class="line">  _resolve()</div><div class="line">&#125;)</div><div class="line"></div><div class="line">// 启动express服务器并监听相应的端口</div><div class="line">var server = app.listen(port)</div><div class="line"></div><div class="line">// 暴露本模块的功能给外部使用，例如下面这种用法</div><div class="line">// var devServer = require(&apos;./build/dev-server&apos;)</div><div class="line">// devServer.ready.then(() =&gt; &#123;...&#125;)</div><div class="line">// if (...) &#123; devServer.close() &#125;</div><div class="line">module.exports = &#123;</div><div class="line">  ready: readyPromise,</div><div class="line">  close: () =&gt; &#123;</div><div class="line">    server.close()</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>build/webpack.base.conf.js<br>从代码中看到，dev-server使用的webpack配置来自build/webpack.dev.conf.js文件（测试环境下使用的是build/webpack.prod.conf.js，这里暂时不考虑测试环境）。而build/webpack.dev.conf.js中又引用了webpack.base.conf.js，所以这里我先分析webpack.base.conf.js。</p>
<p>webpack.base.conf.js主要完成了下面这些事情：</p>
<p>配置webpack编译入口<br>配置webpack输出路径和命名规则<br>配置模块resolve规则<br>配置不同类型模块的处理规则<br>说明： 这个配置里面只配置了.js、.vue、图片、字体等几类文件的处理规则，如果需要处理其他文件可以在module.rules里面另行配置。</p>
<p>具体请看代码注释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line">var path = require(&apos;path&apos;)</div><div class="line">var fs = require(&apos;fs&apos;)</div><div class="line">var utils = require(&apos;./utils&apos;)</div><div class="line">var config = require(&apos;../config&apos;)</div><div class="line">var vueLoaderConfig = require(&apos;./vue-loader.conf&apos;)</div><div class="line"></div><div class="line">// 获取绝对路径</div><div class="line">function resolve (dir) &#123;</div><div class="line">  return path.join(__dirname, &apos;..&apos;, dir)</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  // webpack入口文件</div><div class="line">  entry: &#123;</div><div class="line">    app: &apos;./src/main.js&apos;</div><div class="line">  &#125;,</div><div class="line">  // webpack输出路径和命名规则</div><div class="line">  output: &#123;</div><div class="line">    // webpack输出的目标文件夹路径（例如：/dist）</div><div class="line">    path: config.build.assetsRoot,</div><div class="line">    // webpack输出bundle文件命名格式</div><div class="line">    filename: &apos;[name].js&apos;,</div><div class="line">    // webpack编译输出的发布路径（例如&apos;//cdn.xxx.com/app/&apos;）</div><div class="line">    publicPath: process.env.NODE_ENV === &apos;production&apos;</div><div class="line">      ? config.build.assetsPublicPath</div><div class="line">      : config.dev.assetsPublicPath</div><div class="line">  &#125;,</div><div class="line">  // 模块resolve的规则</div><div class="line">  resolve: &#123;</div><div class="line">    extensions: [&apos;.js&apos;, &apos;.vue&apos;, &apos;.json&apos;],</div><div class="line">    // 别名，方便引用模块，例如有了别名之后，</div><div class="line">    // import Vue from &apos;vue/dist/vue.common.js&apos;可以写成 import Vue from &apos;vue&apos;</div><div class="line">    alias: &#123;</div><div class="line">      &apos;vue$&apos;: &apos;vue/dist/vue.esm.js&apos;,</div><div class="line">      &apos;@&apos;: resolve(&apos;src&apos;),</div><div class="line">    &#125;,</div><div class="line">    symlinks: false</div><div class="line">  &#125;,</div><div class="line">  // 不同类型模块的处理规则</div><div class="line">  </div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;// 对src和test文件夹下的.js和.vue文件使用eslint-loader进行代码规范检查</div><div class="line">        test: /\.(js|vue)$/,</div><div class="line">        loader: &apos;eslint-loader&apos;,</div><div class="line">        enforce: &apos;pre&apos;,</div><div class="line">        include: [resolve(&apos;src&apos;), resolve(&apos;test&apos;)],</div><div class="line">        options: &#123;</div><div class="line">          formatter: require(&apos;eslint-friendly-formatter&apos;)</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      &#123;// 对所有.vue文件使用vue-loader进行编译</div><div class="line">        test: /\.vue$/,</div><div class="line">        loader: &apos;vue-loader&apos;,</div><div class="line">        options: vueLoaderConfig</div><div class="line">      &#125;,</div><div class="line">      &#123;// 对src和test文件夹下的.js文件使用babel-loader将es6+的代码转成es5</div><div class="line">        test: /\.js$/,</div><div class="line">        loader: &apos;babel-loader&apos;,</div><div class="line">        include: [resolve(&apos;src&apos;), resolve(&apos;test&apos;)]</div><div class="line">      &#125;,</div><div class="line">      &#123;// 对图片资源文件使用url-loader</div><div class="line">        test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,</div><div class="line">        loader: &apos;url-loader&apos;,</div><div class="line">        options: &#123;</div><div class="line">          // 小于10K的图片转成base64编码的dataURL字符串写到代码中</div><div class="line">          limit: 10000,</div><div class="line">          // 其他的图片转移到静态资源文件夹</div><div class="line">          name: utils.assetsPath(&apos;img/[name].[hash:7].[ext]&apos;)</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      &#123;// 对多媒体资源文件使用url-loader</div><div class="line">        test: /\.(mp4|webm|ogg|mp3|wav|flac|aac)(\?.*)?$/,</div><div class="line">        loader: &apos;url-loader&apos;,</div><div class="line">        options: &#123;</div><div class="line">          // 小于10K的资源转成base64编码的dataURL字符串写到代码中</div><div class="line">          limit: 10000,</div><div class="line">          // 其他的资源转移到静态资源文件夹</div><div class="line">          name: utils.assetsPath(&apos;media/[name].[hash:7].[ext]&apos;)</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      &#123;// 对字体资源文件使用url-loader</div><div class="line">        test: /\.(woff2?|eot|ttf|otf)(\?.*)?$/,</div><div class="line">        loader: &apos;url-loader&apos;,</div><div class="line">        options: &#123;</div><div class="line">          // 小于10K的资源转成base64编码的dataURL字符串写到代码中</div><div class="line">          limit: 10000,</div><div class="line">          // 其他的资源转移到静态资源文件夹</div><div class="line">          name: utils.assetsPath(&apos;fonts/[name].[hash:7].[ext]&apos;)</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>build/webpack.dev.conf.js<br>接下来看webpack.dev.conf.js，这里面在webpack.base.conf的基础上增加完善了开发环境下面的配置，主要包括下面几件事情：</p>
<p>将webpack的热重载客户端代码添加到每个entry对应的应用<br>合并基础的webpack配置<br>配置样式文件的处理规则，styleLoaders<br>配置Source Maps<br>配置webpack插件<br>详情请看代码注释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">var utils = require(&apos;./utils&apos;)</div><div class="line">var webpack = require(&apos;webpack&apos;)</div><div class="line">var config = require(&apos;../config&apos;)</div><div class="line">// webpack-merge是一个可以合并数组和对象的插件</div><div class="line">var merge = require(&apos;webpack-merge&apos;)</div><div class="line">var baseWebpackConfig = require(&apos;./webpack.base.conf&apos;)</div><div class="line">// html-webpack-plugin用于将webpack编译打包后的产品文件注入到html模板中</div><div class="line">// 即自动在index.html里面加上&lt;link&gt;和&lt;script&gt;标签引用webpack打包后的文件</div><div class="line">var HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">// friendly-errors-webpack-plugin用于更友好地输出webpack的警告、错误等信息</div><div class="line">var FriendlyErrorsPlugin = require(&apos;friendly-errors-webpack-plugin&apos;)</div><div class="line"></div><div class="line">// add hot-reload related code to entry chunks</div><div class="line">// 给每个入口页面(应用)加上dev-client，用于跟dev-server的热重载插件通信，实现热更新</div><div class="line">Object.keys(baseWebpackConfig.entry).forEach(function (name) &#123;</div><div class="line">  baseWebpackConfig.entry[name] = [&apos;./build/dev-client&apos;].concat(baseWebpackConfig.entry[name])</div><div class="line">&#125;)</div><div class="line"></div><div class="line">module.exports = merge(baseWebpackConfig, &#123;</div><div class="line">  module: &#123;</div><div class="line">    // 样式文件的处理规则，对css/sass/scss等不同内容使用相应的styleLoaders</div><div class="line">    // 由utils配置出各种类型的预处理语言所需要使用的loader，例如sass需要使用sass-loader</div><div class="line">    rules: utils.styleLoaders(&#123; sourceMap: config.dev.cssSourceMap &#125;)</div><div class="line">  &#125;,</div><div class="line">  // cheap-module-eval-source-map is faster for development</div><div class="line">  // 使用这种source-map更快</div><div class="line">  devtool: &apos;#cheap-module-eval-source-map&apos;,</div><div class="line">  // webpack插件</div><div class="line">  plugins: [</div><div class="line">    new webpack.DefinePlugin(&#123;</div><div class="line">      &apos;process.env&apos;: config.dev.env</div><div class="line">    &#125;),</div><div class="line">    // 开启webpack热更新功能</div><div class="line">    new webpack.HotModuleReplacementPlugin(),</div><div class="line">    // webpack编译过程中出错的时候跳过报错阶段，不会阻塞编译，在编译结束后报错</div><div class="line">    new webpack.NoEmitOnErrorsPlugin(),</div><div class="line">    // 自动将依赖注入html模板，并输出最终的html文件到目标文件夹</div><div class="line">    new HtmlWebpackPlugin(&#123;</div><div class="line">      filename: &apos;index.html&apos;,</div><div class="line">      template: &apos;index.html&apos;,</div><div class="line">      inject: true</div><div class="line">    &#125;),</div><div class="line">    new FriendlyErrorsPlugin()</div><div class="line">  ]</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>build/utils.js<br>utils提供工具函数，包括生成处理各种样式语言的loader，获取资源文件存放路径的工具函数。 </p>
<ol>
<li>计算资源文件存放路径 </li>
<li>生成cssLoaders用于加载.vue文件中的样式 </li>
<li>生成styleLoaders用于加载不在.vue文件中的单独存在的样式文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div></pre></td><td class="code"><pre><div class="line">var path = require(&apos;path&apos;)</div><div class="line">var config = require(&apos;../config&apos;)</div><div class="line">// extract-text-webpack-plugin可以提取bundle中的特定文本，将提取后的文本单独存放到另外的文件</div><div class="line">// 这里用来提取css样式</div><div class="line">var ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;)</div><div class="line"></div><div class="line">// 资源文件的存放路径</div><div class="line">exports.assetsPath = function (_path) &#123;</div><div class="line">  var assetsSubDirectory = process.env.NODE_ENV === &apos;production&apos;</div><div class="line">    ? config.build.assetsSubDirectory</div><div class="line">    : config.dev.assetsSubDirectory</div><div class="line">  return path.posix.join(assetsSubDirectory, _path)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 生成css、sass、scss等各种用来编写样式的语言所对应的loader配置</div><div class="line">exports.cssLoaders = function (options) &#123;</div><div class="line">  options = options || &#123;&#125;</div><div class="line">  // css-loader配置</div><div class="line">  var cssLoader = &#123;</div><div class="line">    loader: &apos;css-loader&apos;,</div><div class="line">    options: &#123;</div><div class="line">      // 是否最小化</div><div class="line">      minimize: process.env.NODE_ENV === &apos;production&apos;,</div><div class="line">      // 是否使用source-map</div><div class="line">      sourceMap: options.sourceMap</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // generate loader string to be used with extract text plugin</div><div class="line">  // 生成各种loader配置，并且配置了extract-text-pulgin</div><div class="line">  function generateLoaders (loader, loaderOptions) &#123;</div><div class="line">    // 默认是css-loader</div><div class="line">    var loaders = [cssLoader]</div><div class="line">    // 如果非css，则增加一个处理预编译语言的loader并设好相关配置属性</div><div class="line">    // 例如generateLoaders(&apos;less&apos;)，这里就会push一个less-loader</div><div class="line">    // less-loader先将less编译成css，然后再由css-loader去处理css</div><div class="line">    // 其他sass、scss等语言也是一样的过程</div><div class="line">    if (loader) &#123;</div><div class="line">      loaders.push(&#123;</div><div class="line">        loader: loader + &apos;-loader&apos;,</div><div class="line">        options: Object.assign(&#123;&#125;, loaderOptions, &#123;</div><div class="line">          sourceMap: options.sourceMap</div><div class="line">        &#125;)</div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Extract CSS when that option is specified</div><div class="line">    // (which is the case during production build)</div><div class="line">    if (options.extract) &#123;</div><div class="line">      // 配置extract-text-plugin提取样式</div><div class="line">      return ExtractTextPlugin.extract(&#123;</div><div class="line">        use: loaders,</div><div class="line">        fallback: &apos;vue-style-loader&apos;</div><div class="line">      &#125;)</div><div class="line">    &#125; else &#123;</div><div class="line">      // 无需提取样式则简单使用vue-style-loader配合各种样式loader去处理&lt;style&gt;里面的样式</div><div class="line">      return [&apos;vue-style-loader&apos;].concat(loaders)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // https://vue-loader.vuejs.org/en/configurations/extract-css.html</div><div class="line">  // 得到各种不同处理样式的语言所对应的loader</div><div class="line">  return &#123;</div><div class="line">    css: generateLoaders(),</div><div class="line">    postcss: generateLoaders(),</div><div class="line">    less: generateLoaders(&apos;less&apos;),</div><div class="line">    sass: generateLoaders(&apos;sass&apos;, &#123; indentedSyntax: true &#125;),</div><div class="line">    scss: generateLoaders(&apos;sass&apos;),</div><div class="line">    stylus: generateLoaders(&apos;stylus&apos;),</div><div class="line">    styl: generateLoaders(&apos;stylus&apos;)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// Generate loaders for standalone style files (outside of .vue)</div><div class="line">// 生成处理单独的.css、.sass、.scss等样式文件的规则</div><div class="line">exports.styleLoaders = function (options) &#123;</div><div class="line">  var output = []</div><div class="line">  var loaders = exports.cssLoaders(options)</div><div class="line">  for (var extension in loaders) &#123;</div><div class="line">    var loader = loaders[extension]</div><div class="line">    output.push(&#123;</div><div class="line">      test: new RegExp(&apos;\\.&apos; + extension + &apos;$&apos;),</div><div class="line">      use: loader</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">  return output</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">build/vue-loader.conf.js</div><div class="line">vue-loader.conf的配置比较简单，详情请看代码注释：</div><div class="line"></div><div class="line">var utils = require(&apos;./utils&apos;)</div><div class="line">var config = require(&apos;../config&apos;)</div><div class="line">var isProduction = process.env.NODE_ENV === &apos;production&apos;</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  // 处理.vue文件中的样式</div><div class="line">  loaders: utils.cssLoaders(&#123;</div><div class="line">    // 是否打开source-map</div><div class="line">    sourceMap: isProduction</div><div class="line">      ? config.build.productionSourceMap</div><div class="line">      : config.dev.cssSourceMap,</div><div class="line">    // 是否提取样式到单独的文件</div><div class="line">    extract: isProduction</div><div class="line">  &#125;),</div><div class="line">  transformToRequire: &#123;</div><div class="line">    video: &apos;src&apos;,</div><div class="line">    source: &apos;src&apos;,</div><div class="line">    img: &apos;src&apos;,</div><div class="line">    image: &apos;xlink:href&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">build/dev-client.js</div><div class="line">dev-client.js里面主要写了浏览器端代码，用于实现webpack的热更新。</div><div class="line"></div><div class="line">/* eslint-disable */</div><div class="line">// 实现浏览器端的EventSource，用于跟服务器双向通信</div><div class="line">// webpack热重载客户端跟dev-server上的热重载插件之间需要进行双向通信</div><div class="line">// 服务端webpack重新编译后，会向客户端推送信息，告诉客户端进行更新</div><div class="line">require(&apos;eventsource-polyfill&apos;)</div><div class="line">// webpack热重载客户端</div><div class="line">var hotClient = require(&apos;webpack-hot-middleware/client?noInfo=true&amp;reload=true&apos;)</div><div class="line"></div><div class="line">// 客户端收到更新动作，执行页面刷新</div><div class="line">hotClient.subscribe(function (event) &#123;</div><div class="line">  if (event.action === &apos;reload&apos;) &#123;</div><div class="line">    window.location.reload()</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
</ol>
<p>build/build.js<br>讲完了开发环境下的配置，下面开始来看构建环境下的配置。执行”npm run build”的时候首先执行的是build/build.js文件，build.js主要完成下面几件事：</p>
<p>loading动画<br>删除目标文件夹<br>执行webpack构建<br>输出信息<br>说明： webpack编译之后会输出到配置里面指定的目标文件夹；删除目标文件夹之后再创建是为了去除旧的内容，以免产生不可预测的影响。</p>
<p>详情请看代码注释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">// 检查NodeJS和npm的版本</div><div class="line">require(&apos;./check-versions&apos;)()</div><div class="line"></div><div class="line">process.env.NODE_ENV = &apos;production&apos;</div><div class="line"></div><div class="line">// ora，一个可以在终端显示spinner的插件</div><div class="line">var ora = require(&apos;ora&apos;)</div><div class="line">// rm，用于删除文件或文件夹的插件</div><div class="line">var rm = require(&apos;rimraf&apos;)</div><div class="line">var path = require(&apos;path&apos;)</div><div class="line">// chalk，用于在控制台输出带颜色字体的插件</div><div class="line">var chalk = require(&apos;chalk&apos;)</div><div class="line">var webpack = require(&apos;webpack&apos;)</div><div class="line">var config = require(&apos;../config&apos;)</div><div class="line">var webpackConfig = require(&apos;./webpack.prod.conf&apos;)</div><div class="line"></div><div class="line">var spinner = ora(&apos;building for production...&apos;)</div><div class="line">spinner.start() // 开启loading动画</div><div class="line"></div><div class="line">// 首先将整个dist文件夹以及里面的内容删除，以免遗留旧的没用的文件</div><div class="line">// 删除完成后才开始webpack构建打包</div><div class="line">rm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =&gt; &#123;</div><div class="line">  if (err) throw err</div><div class="line">  // 执行webpack构建打包，完成之后在终端输出构建完成的相关信息或者输出报错信息并退出程序</div><div class="line">  webpack(webpackConfig, function (err, stats) &#123;</div><div class="line">    spinner.stop()</div><div class="line">    if (err) throw err</div><div class="line">    process.stdout.write(stats.toString(&#123;</div><div class="line">      colors: true,</div><div class="line">      modules: false,</div><div class="line">      children: false,</div><div class="line">      chunks: false,</div><div class="line">      chunkModules: false</div><div class="line">    &#125;) + &apos;\n\n&apos;)</div><div class="line"></div><div class="line">    if (stats.hasErrors()) &#123;</div><div class="line">      console.log(chalk.red(&apos;  Build failed with errors.\n&apos;))</div><div class="line">      process.exit(1)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    console.log(chalk.cyan(&apos;  Build complete.\n&apos;))</div><div class="line">    console.log(chalk.yellow(</div><div class="line">      &apos;  Tip: built files are meant to be served over an HTTP server.\n&apos; +</div><div class="line">      &apos;  Opening index.html over file:// won\&apos;t work.\n&apos;</div><div class="line">    ))</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>build/webpack.prod.conf.js<br>构建的时候用到的webpack配置来自webpack.prod.conf.js，该配置同样是在webpack.base.conf基础上的进一步完善。主要完成下面几件事情：</p>
<p>合并基础的webpack配置<br>配置样式文件的处理规则，styleLoaders<br>配置webpack的输出<br>配置webpack插件<br>gzip模式下的webpack插件配置<br>webpack-bundle分析<br>说明： webpack插件里面多了丑化压缩代码以及抽离css文件等插件。</p>
<p>详情请看代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div></pre></td><td class="code"><pre><div class="line">var path = require(&apos;path&apos;)</div><div class="line">var utils = require(&apos;./utils&apos;)</div><div class="line">var webpack = require(&apos;webpack&apos;)</div><div class="line">var config = require(&apos;../config&apos;)</div><div class="line">var merge = require(&apos;webpack-merge&apos;)</div><div class="line">var baseWebpackConfig = require(&apos;./webpack.base.conf&apos;)</div><div class="line">// copy-webpack-plugin，用于将static中的静态文件复制到产品文件夹dist</div><div class="line">var CopyWebpackPlugin = require(&apos;copy-webpack-plugin&apos;)</div><div class="line">var HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line">var ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;)</div><div class="line">// optimize-css-assets-webpack-plugin，用于优化和最小化css资源</div><div class="line">var OptimizeCSSPlugin = require(&apos;optimize-css-assets-webpack-plugin&apos;)</div><div class="line"></div><div class="line">var env = config.build.env</div><div class="line"></div><div class="line">var webpackConfig = merge(baseWebpackConfig, &#123;</div><div class="line">  module: &#123;</div><div class="line">    // 样式文件的处理规则，对css/sass/scss等不同内容使用相应的styleLoaders</div><div class="line">    // 由utils配置出各种类型的预处理语言所需要使用的loader，例如sass需要使用sass-loader</div><div class="line">    rules: utils.styleLoaders(&#123;</div><div class="line">      sourceMap: config.build.productionSourceMap,</div><div class="line">      extract: true</div><div class="line">    &#125;)</div><div class="line">  &#125;,</div><div class="line">  // 是否使用source-map</div><div class="line">  devtool: config.build.productionSourceMap ? &apos;#source-map&apos; : false,</div><div class="line">  // webpack输出路径和命名规则</div><div class="line">  output: &#123;</div><div class="line">    path: config.build.assetsRoot,</div><div class="line">    filename: utils.assetsPath(&apos;js/[name].[chunkhash].js&apos;),</div><div class="line">    chunkFilename: utils.assetsPath(&apos;js/[id].[chunkhash].js&apos;)</div><div class="line">  &#125;,</div><div class="line">  // webpack插件</div><div class="line">  plugins: [</div><div class="line">    // http://vuejs.github.io/vue-loader/en/workflow/production.html</div><div class="line">    new webpack.DefinePlugin(&#123;</div><div class="line">      &apos;process.env&apos;: env</div><div class="line">    &#125;),</div><div class="line">    // 丑化压缩JS代码</div><div class="line">    new webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">      compress: &#123;</div><div class="line">        warnings: false</div><div class="line">      &#125;,</div><div class="line">      sourceMap: true</div><div class="line">    &#125;),</div><div class="line">    // extract css into its own file</div><div class="line">    // 将css提取到单独的文件</div><div class="line">    new ExtractTextPlugin(&#123;</div><div class="line">      filename: utils.assetsPath(&apos;css/[name].[contenthash].css&apos;)</div><div class="line">    &#125;),</div><div class="line">    // Compress extracted CSS. We are using this plugin so that possible</div><div class="line">    // duplicated CSS from different components can be deduped.</div><div class="line">    // 优化、最小化css代码，如果只简单使用extract-text-plugin可能会造成css重复</div><div class="line">    // 具体原因可以看npm上面optimize-css-assets-webpack-plugin的介绍</div><div class="line">    new OptimizeCSSPlugin(&#123;</div><div class="line">      cssProcessorOptions: &#123;</div><div class="line">        safe: true</div><div class="line">      &#125;</div><div class="line">    &#125;),</div><div class="line">    // generate dist index.html with correct asset hash for caching.</div><div class="line">    // you can customize output by editing /index.html</div><div class="line">    // see https://github.com/ampedandwired/html-webpack-plugin</div><div class="line">    // 将产品文件的引用注入到index.html</div><div class="line">    new HtmlWebpackPlugin(&#123;</div><div class="line">      filename: config.build.index,</div><div class="line">      template: &apos;index.html&apos;,</div><div class="line">      inject: true,</div><div class="line">      minify: &#123;</div><div class="line">        // 删除index.html中的注释</div><div class="line">        removeComments: true,</div><div class="line">        // 删除index.html中的空格</div><div class="line">        collapseWhitespace: true,</div><div class="line">        // 删除各种html标签属性值的双引号</div><div class="line">        removeAttributeQuotes: true</div><div class="line">        // more options:</div><div class="line">        // https://github.com/kangax/html-minifier#options-quick-reference</div><div class="line">      &#125;,</div><div class="line">      // necessary to consistently work with multiple chunks via CommonsChunkPlugin</div><div class="line">      // 注入依赖的时候按照依赖先后顺序进行注入，比如，需要先注入vendor.js，再注入app.js</div><div class="line">      chunksSortMode: &apos;dependency&apos;</div><div class="line">    &#125;),</div><div class="line">    // keep module.id stable when vender modules does not change</div><div class="line">    new webpack.HashedModuleIdsPlugin(),</div><div class="line">    // split vendor js into its own file</div><div class="line">    // 将所有从node_modules中引入的js提取到vendor.js，即抽取库文件</div><div class="line">    new webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">      name: &apos;vendor&apos;,</div><div class="line">      minChunks: function (module, count) &#123;</div><div class="line">        // any required modules inside node_modules are extracted to vendor</div><div class="line">        return (</div><div class="line">          module.resource &amp;&amp;</div><div class="line">          /\.js$/.test(module.resource) &amp;&amp;</div><div class="line">          module.resource.indexOf(</div><div class="line">            path.join(__dirname, &apos;../node_modules&apos;)</div><div class="line">          ) === 0</div><div class="line">        )</div><div class="line">      &#125;</div><div class="line">    &#125;),</div><div class="line">    // extract webpack runtime and module manifest to its own file in order to</div><div class="line">    // prevent vendor hash from being updated whenever app bundle is updated</div><div class="line">    // 从vendor中提取出manifest，原因如上</div><div class="line">    new webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">      name: &apos;manifest&apos;,</div><div class="line">      chunks: [&apos;vendor&apos;]</div><div class="line">    &#125;),</div><div class="line">    // copy custom static assets</div><div class="line">    // 将static文件夹里面的静态资源复制到dist/static</div><div class="line">    new CopyWebpackPlugin([</div><div class="line">      &#123;</div><div class="line">        from: path.resolve(__dirname, &apos;../static&apos;),</div><div class="line">        to: config.build.assetsSubDirectory,</div><div class="line">        ignore: [&apos;.*&apos;]</div><div class="line">      &#125;</div><div class="line">    ])</div><div class="line">  ]</div><div class="line">&#125;)</div><div class="line"></div><div class="line">// 如果开启了产品gzip压缩，则利用插件将构建后的产品文件进行压缩</div><div class="line">if (config.build.productionGzip) &#123;</div><div class="line">  // 一个用于压缩的webpack插件</div><div class="line">  var CompressionWebpackPlugin = require(&apos;compression-webpack-plugin&apos;)</div><div class="line"></div><div class="line">  webpackConfig.plugins.push(</div><div class="line">    new CompressionWebpackPlugin(&#123;</div><div class="line">      asset: &apos;[path].gz[query]&apos;,</div><div class="line">      // 压缩算法</div><div class="line">      algorithm: &apos;gzip&apos;,</div><div class="line">      test: new RegExp(</div><div class="line">        &apos;\\.(&apos; +</div><div class="line">        config.build.productionGzipExtensions.join(&apos;|&apos;) +</div><div class="line">        &apos;)$&apos;</div><div class="line">      ),</div><div class="line">      threshold: 10240,</div><div class="line">      minRatio: 0.8</div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 如果启动了report，则通过插件给出webpack构建打包后的产品文件分析报告</div><div class="line">if (config.build.bundleAnalyzerReport) &#123;</div><div class="line">  var BundleAnalyzerPlugin = require(&apos;webpack-bundle-analyzer&apos;).BundleAnalyzerPlugin</div><div class="line">  webpackConfig.plugins.push(new BundleAnalyzerPlugin())</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = webpackConfig</div><div class="line"></div><div class="line"></div><div class="line">build/check-versions.js</div><div class="line">最后是build文件夹下的check-version.js，它完成对node和npm的版本检测，下面是其代码注释：</div><div class="line"></div><div class="line">// chalk, 用于在控制台输出带颜色字体的插件</div><div class="line">var chalk = require(&apos;chalk&apos;)</div><div class="line">// semver, 语义化版本检查插件（The semantic version parser used by npm）</div><div class="line">var semver = require(&apos;semver&apos;)</div><div class="line">var packageConfig = require(&apos;../package.json&apos;)</div><div class="line">// shelljs, 执行Unix命令行的插件</div><div class="line">var shell = require(&apos;shelljs&apos;)</div><div class="line">// 开辟子进程执行指令cmd并返回结果</div><div class="line">function exec (cmd) &#123;</div><div class="line">  return require(&apos;child_process&apos;).execSync(cmd).toString().trim()</div><div class="line">&#125;</div><div class="line"></div><div class="line">// node和npm版本需求</div><div class="line">var versionRequirements = [</div><div class="line">  &#123;</div><div class="line">    name: &apos;node&apos;,</div><div class="line">    currentVersion: semver.clean(process.version),</div><div class="line">    versionRequirement: packageConfig.engines.node</div><div class="line">  &#125;</div><div class="line">]</div><div class="line"></div><div class="line">if (shell.which(&apos;npm&apos;)) &#123;</div><div class="line">  versionRequirements.push(&#123;</div><div class="line">    name: &apos;npm&apos;,</div><div class="line">    currentVersion: exec(&apos;npm --version&apos;),</div><div class="line">    versionRequirement: packageConfig.engines.npm</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = function () &#123;</div><div class="line">  var warnings = []</div><div class="line">  // 依次判断版本是否符合要求</div><div class="line">  for (var i = 0; i &lt; versionRequirements.length; i++) &#123;</div><div class="line">    var mod = versionRequirements[i]</div><div class="line">    if (!semver.satisfies(mod.currentVersion, mod.versionRequirement)) &#123;</div><div class="line">      warnings.push(mod.name + &apos;: &apos; +</div><div class="line">        chalk.red(mod.currentVersion) + &apos; should be &apos; +</div><div class="line">        chalk.green(mod.versionRequirement)</div><div class="line">      )</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  // 如果有警告则将其输出到控制台</div><div class="line">  if (warnings.length) &#123;</div><div class="line">    console.log(&apos;&apos;)</div><div class="line">    console.log(chalk.yellow(&apos;To use this template, you must update following to modules:&apos;))</div><div class="line">    console.log()</div><div class="line">    for (var i = 0; i &lt; warnings.length; i++) &#123;</div><div class="line">      var warning = warnings[i]</div><div class="line">      console.log(&apos;  &apos; + warning)</div><div class="line">    &#125;</div><div class="line">    console.log()</div><div class="line">    process.exit(1)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>###四、config文件夹分析<br>config/index.js<br>config文件夹下最主要的文件就是index.js了，在这里面描述了开发和构建两种环境下的配置，前面的build文件夹下也有不少文件引用了index.js里面的配置。下面是代码注释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">// see http://vuejs-templates.github.io/webpack for documentation.</div><div class="line">var path = require(&apos;path&apos;)</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  // 构建产品时使用的配置</div><div class="line">  build: &#123;</div><div class="line">    // 环境变量</div><div class="line">    env: require(&apos;./prod.env&apos;),</div><div class="line">    // html入口文件</div><div class="line">    index: path.resolve(__dirname, &apos;../dist/index.html&apos;),</div><div class="line">    // 产品文件的存放路径</div><div class="line">    assetsRoot: path.resolve(__dirname, &apos;../dist&apos;),</div><div class="line">    // 二级目录，存放静态资源文件的目录，位于dist文件夹下</div><div class="line">    assetsSubDirectory: &apos;static&apos;,</div><div class="line">    // 发布路径，如果构建后的产品文件有用于发布CDN或者放到其他域名的服务器，可以在这里进行设置</div><div class="line">    // 设置之后构建的产品文件在注入到index.html中的时候就会带上这里的发布路径</div><div class="line">    assetsPublicPath: &apos;/&apos;,</div><div class="line">    // 是否使用source-map</div><div class="line">    productionSourceMap: true,</div><div class="line">    // Gzip off by default as many popular static hosts such as</div><div class="line">    // Surge or Netlify already gzip all static assets for you.</div><div class="line">    // Before setting to `true`, make sure to:</div><div class="line">    // npm install --save-dev compression-webpack-plugin</div><div class="line">    // 是否开启gzip压缩</div><div class="line">    productionGzip: false,</div><div class="line">    // gzip模式下需要压缩的文件的扩展名，设置js、css之后就只会对js和css文件进行压缩</div><div class="line">    productionGzipExtensions: [&apos;js&apos;, &apos;css&apos;],</div><div class="line">    // Run the build command with an extra argument to</div><div class="line">    // View the bundle analyzer report after build finishes:</div><div class="line">    // `npm run build --report`</div><div class="line">    // Set to `true` or `false` to always turn it on or off</div><div class="line">    // 是否展示webpack构建打包之后的分析报告</div><div class="line">    bundleAnalyzerReport: process.env.npm_config_report</div><div class="line">  &#125;,</div><div class="line">  // 开发过程中使用的配置</div><div class="line">  dev: &#123;</div><div class="line">    // 环境变量</div><div class="line">    env: require(&apos;./dev.env&apos;),</div><div class="line">    // dev-server监听的端口</div><div class="line">    port: 8080,</div><div class="line">    // 是否自动打开浏览器</div><div class="line">    autoOpenBrowser: true,</div><div class="line">    // 静态资源文件夹</div><div class="line">    assetsSubDirectory: &apos;static&apos;,</div><div class="line">    // 发布路径</div><div class="line">    assetsPublicPath: &apos;/&apos;,</div><div class="line">    // 代理配置表，在这里可以配置特定的请求代理到对应的API接口</div><div class="line">    // 例如将&apos;localhost:8080/api/xxx&apos;代理到&apos;www.example.com/api/xxx&apos;</div><div class="line">    proxyTable: &#123;&#125;,</div><div class="line">    // CSS Sourcemaps off by default because relative paths are &quot;buggy&quot;</div><div class="line">    // with this option, according to the CSS-Loader README</div><div class="line">    // (https://github.com/webpack/css-loader#sourcemaps)</div><div class="line">    // In our experience, they generally work as expected,</div><div class="line">    // just be aware of this issue when enabling this option.</div><div class="line">    // 是否开启 cssSourceMap</div><div class="line">    cssSourceMap: false</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>config/dev.env.js、config/prod.env.js和config/test.env.js<br>这三个文件就简单设置了环境变量而已，没什么特别的。</p>
<p>###五、总结<br>到这里对模板项目的build和config文件夹下面的内容已经基本了解，知道了在实际使用中根据自己的需求修改哪里的配置，例如，当我有需要配置代理的时候要在config/index.js里面的dev.proxyTable设置，当我修改了资源文件夹名称static同样需要在config/index.js里面设置。webpack的插件好多，在看代码的过程中遇到不认识的插件都是要去查看很多文档（github，npm或者博客），感觉实际过程中更改插件配置或者使用新插件也是需要费点心思钻文档和网上其他博客介绍</p>

          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/判断浏览器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/判断浏览器/" itemprop="url">判断浏览器版本</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:03:02+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="代码如下"><a href="#代码如下" class="headerlink" title="代码如下"></a>代码如下</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">function userBrowser()&#123;  </div><div class="line">  var browserName=navigator.userAgent.toLowerCase();  </div><div class="line">  if(/msie/i.test(browserName) &amp;&amp; !/opera/.test(browserName))&#123;  </div><div class="line">      alert(&quot;IE&quot;);  </div><div class="line">      return ;  </div><div class="line">  &#125;else if(/firefox/i.test(browserName))&#123;  </div><div class="line">      alert(&quot;Firefox&quot;);  </div><div class="line">      return ;  </div><div class="line">  &#125;else if(/chrome/i.test(browserName) &amp;&amp; /webkit/i.test(browserName) &amp;&amp; /mozilla/i.test(browserName))&#123;  </div><div class="line">      alert(&quot;Chrome&quot;);  </div><div class="line">      return ;  </div><div class="line">  &#125;else if(/opera/i.test(browserName))&#123;  </div><div class="line">      alert(&quot;Opera&quot;);  </div><div class="line">      return ;  </div><div class="line">  &#125;else if(/iPad/i)&#123; </div><div class="line">          alert(&quot;ipad&quot;); </div><div class="line">          return ; </div><div class="line">      &#125;</div><div class="line">  else if(/webkit/i.test(browserName) &amp;&amp;!(/chrome/i.test(browserName) &amp;&amp; /webkit/i.test(browserName) &amp;&amp; /mozilla/i.test(browserName)))&#123;  </div><div class="line">          alert(&quot;Safari&quot;);  </div><div class="line">          return ;  </div><div class="line">      &#125;else&#123;  </div><div class="line">          alert(&quot;unKnow&quot;);  </div><div class="line">      &#125;  </div><div class="line">&#125;  </div><div class="line">userBrowser();</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/解决兼容/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/解决兼容/" itemprop="url">基于Gulp的前端开发模版</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:03:02+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>项目运行</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ git clone https:<span class="comment">//github.com/jusfoun-FE/automation-development-ie8.git</span></div><div class="line"></div><div class="line">$ cd automation-development-ie8</div><div class="line"></div><div class="line">$ npm install</div><div class="line"></div><div class="line">$ npm run dev <span class="comment">//用于开发环境</span></div><div class="line"></div><div class="line">$ npm run build <span class="comment">//用于生产环境</span></div></pre></td></tr></table></figure></p>
<p>浏览器输入地址查看模板：<a href="http://localhost:3000/html/index/" target="_blank" rel="external">http://localhost:3000/html/index/</a></p>
<h3 id="项目目录结构"><a href="#项目目录结构" class="headerlink" title="项目目录结构"></a>项目目录结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├─ build/               # gulp 任务配置目录</div><div class="line">├─ dist/                # build 生成的生产环境下的项目</div><div class="line">├─ src/                 # 源码目录（开发都在这里进行）</div><div class="line">│   ├── components/     # 组件（COMPONENT）</div><div class="line">│   ├── html/           # 页面级html</div><div class="line">│   ├── css/            # css文件存放目录（less ,scss,css）</div><div class="line">│   ├── js/             # js文件存放目录</div><div class="line">│   ├── images/         # 图片文件</div><div class="line">├── .babelrc            # Babel 转码配置</div><div class="line">├── .gitignore          # （配置）需被 Git 忽略的文件（夹）</div><div class="line">├── gulpfile.js         #   gulpfile基础配置文件</div><div class="line">├── package.json        # （这个就不用多解释了吧）</div></pre></td></tr></table></figure>
<h3 id="IE低版本兼容小贴士"><a href="#IE低版本兼容小贴士" class="headerlink" title="IE低版本兼容小贴士"></a>IE低版本兼容小贴士</h3><h4 id="IE浏览器hack"><a href="#IE浏览器hack" class="headerlink" title="IE浏览器hack"></a>IE浏览器hack</h4><p>html:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--[if IE]&gt;</span></div><div class="line">这段文字只在IE浏览器显示</div><div class="line">&lt;![endif]--&gt;</div><div class="line"></div><div class="line">只在IE6下生效</div><div class="line"><span class="comment">&lt;!--[if IE 6]&gt;</span></div><div class="line">这段文字只在IE6浏览器显示</div><div class="line">&lt;![endif]--&gt;</div><div class="line"></div><div class="line">只在IE6以上版本生效</div><div class="line"><span class="comment">&lt;!--[if gte IE 6]&gt;</span></div><div class="line">这段文字只在IE6以上(包括)版本IE浏览器显示</div><div class="line">&lt;![endif]--&gt;</div><div class="line"></div><div class="line">只在IE8上不生效</div><div class="line"><span class="comment">&lt;!--[if ! IE 8]&gt;</span></div><div class="line">这段文字在非IE8浏览器显示</div><div class="line">&lt;![endif]--&gt;</div><div class="line"></div><div class="line">非IE浏览器生效</div><div class="line"><span class="comment">&lt;!--[if !IE]&gt;</span></div><div class="line">这段文字只在非IE浏览器显示</div><div class="line">&lt;![endif]--&gt;</div></pre></td></tr></table></figure></p>
<p>css:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">“-″减号是IE6专有的hack</div><div class="line">“\9″ IE6/IE7/IE8/IE9/IE10都生效</div><div class="line">“\0″ IE8/IE9/IE10都生效，是IE8/9/10的hack</div><div class="line">“\9\0″ 只对IE9/IE10生效，是IE9/10的hack</div><div class="line">.hack&#123;</div><div class="line">/*demo1 注意顺序，否则IE6/7下可能无法正确显示，导致结果显示为白色背景*/</div><div class="line">    background-color:red; /* All browsers */</div><div class="line">    background-color:blue !important;/* All browsers but IE6 */</div><div class="line">    *background-color:black; /* IE6, IE7 */</div><div class="line">    +background-color:yellow;/* IE6, IE7*/</div><div class="line">    background-color:gray\9; /* IE6, IE7, IE8, IE9, IE10 */</div><div class="line">    background-color:purple\0; /* IE8, IE9, IE10 */</div><div class="line">    background-color:orange\9\0;/*IE9, IE10*/</div><div class="line">    _background-color:green; /* Only works in IE6 */</div><div class="line">    *+background-color:pink; /*  WARNING: Only works in IE7 ? Is it right? */</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="1、IE8及以下，布局问题"><a href="#1、IE8及以下，布局问题" class="headerlink" title="1、IE8及以下，布局问题"></a>1、IE8及以下，布局问题</h4><p>不使用flex，box-size:border-box，calc</p>
<h4 id="2、ie下进行跨域请求解决方案"><a href="#2、ie下进行跨域请求解决方案" class="headerlink" title="2、ie下进行跨域请求解决方案"></a>2、ie下进行跨域请求解决方案</h4><p>引入jquery.xdomainrequest.min.js</p>
<h4 id="3、ie8-9-进行跨域post请求，参数无法传递解决办法"><a href="#3、ie8-9-进行跨域post请求，参数无法传递解决办法" class="headerlink" title="3、ie8,9 进行跨域post请求，参数无法传递解决办法"></a>3、ie8,9 进行跨域post请求，参数无法传递解决办法</h4><p>jquery的ajax方法添加<br>crossDomain: true == !(document.all)<br>例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">$.ajax(&#123;</div><div class="line">    <span class="attr">url</span>: url,</div><div class="line">    <span class="attr">type</span>: <span class="string">'POST'</span>,</div><div class="line">    <span class="attr">data</span>: params,</div><div class="line">    <span class="attr">dataType</span>: <span class="string">'json'</span>,</div><div class="line">    <span class="attr">contentType</span>: <span class="string">"application/json"</span>,</div><div class="line">    <span class="attr">crossDomain</span>: <span class="literal">true</span> == !(<span class="built_in">document</span>.all),</div><div class="line">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">      ...</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">error</span>: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">      ...</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h4 id="4、IE6-IE7下overflow：hidden无效"><a href="#4、IE6-IE7下overflow：hidden无效" class="headerlink" title="4、IE6,IE7下overflow：hidden无效"></a>4、IE6,IE7下overflow：hidden无效</h4><p>解决办法：position:relative; 或者 <em>position:relative; /</em> for IE6,IE7 */ 即可解决该bug。<br><br>既：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</div><div class="line"><span class="selector-tag">overflow</span>: <span class="selector-tag">hidden</span>;</div></pre></td></tr></table></figure></p>
<h4 id="5、css3选择器兼容问题？"><a href="#5、css3选择器兼容问题？" class="headerlink" title="5、css3选择器兼容问题？"></a>5、css3选择器兼容问题？</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">!-</span> <span class="attr">-</span>[<span class="attr">if</span> (<span class="attr">gte</span> <span class="attr">IE</span> <span class="attr">6</span>)&amp;(<span class="attr">lte</span> <span class="attr">IE</span> <span class="attr">8</span>)]&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"./js/common/nwmatcher.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"./js/common/selectivizr-min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">![endif]-</span> <span class="attr">-</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在非必不可得到情况下不建议使用，会引起页面卡顿</p>
<h4 id="6、兼容IE8不直接使用sessionStorage-localStorage"><a href="#6、兼容IE8不直接使用sessionStorage-localStorage" class="headerlink" title="6、兼容IE8不直接使用sessionStorage,localStorage"></a>6、兼容IE8不直接使用sessionStorage,localStorage</h4><p>使用公用方法，使用办法如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setKeyItem</span>(<span class="params">key,value</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.sessionStorage)&#123;</div><div class="line">      sessionStorage.setItem(key,value);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">      setCookie(key,value,TimeoutCookie)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="7、“JSON”未定义"><a href="#7、“JSON”未定义" class="headerlink" title="7、“JSON”未定义"></a>7、“JSON”未定义</h4><p>引入json2.js<br><br>注：本模板已经引入<br><br>下载地址：<a href="https://github.com/douglascrockford/JSON-js" target="_blank" rel="external">https://github.com/douglascrockford/JSON-js</a></p>
<h4 id="8、IE跨域下出现-“readyState”-0-”status”-0-”TypeError”…"><a href="#8、IE跨域下出现-“readyState”-0-”status”-0-”TypeError”…" class="headerlink" title="8、IE跨域下出现{“readyState”:0,”status”:0,”TypeError”…}"></a>8、IE跨域下出现{“readyState”:0,”status”:0,”TypeError”…}</h4><p>对浏览器进行设置 工具-&gt;Internet选项-&gt;安全-&gt;自定义级别-&gt;其他-&gt;通过域访问数据源-&gt;启用</p>
<h4 id="9、透明度兼容性："><a href="#9、透明度兼容性：" class="headerlink" title="9、透明度兼容性："></a>9、透明度兼容性：</h4><p>a、使用rgba背景色做透明的：<br><br>背景色变成：background: #000 \9;<br><br>再加IE9及以下的透明度设置方法<br><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">opacity=80</div><div class="line">-ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);</div><div class="line">filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);</div></pre></td></tr></table></figure></p>
<p>b、直接使用opacity设置透明度的<br><br>添加IE9及以下的透明度设置方法<br><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">opacity=80</div><div class="line">-ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);</div><div class="line">filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);</div></pre></td></tr></table></figure></p>
<h4 id="10、输入框垂直居中问题"><a href="#10、输入框垂直居中问题" class="headerlink" title="10、输入框垂直居中问题"></a>10、输入框垂直居中问题</h4><p>将line-height设置成和height一样 即可,如：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">innput</span><span class="selector-class">.txt</span>&#123;</div><div class="line">  <span class="attribute">height</span>: <span class="number">36px</span>;</div><div class="line">  <span class="attribute">line-height</span>: <span class="number">36px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="11、布局错位问题"><a href="#11、布局错位问题" class="headerlink" title="11、布局错位问题:"></a>11、布局错位问题:</h4><p>a、没有清除浮动的清除浮动即可,如：<br><br>html:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div class="parent clear"&gt;</div><div class="line">  &lt;div class="child"&gt;child1&lt;/div&gt;</div><div class="line">  &lt;div class="child"&gt;child2&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">.clear&#123;</div><div class="line">  overflow: hidden;</div><div class="line">  *zoom:1;</div><div class="line">&#125;</div><div class="line">.parent .child&#123;</div><div class="line">  float: left;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="12、css伪类问题："><a href="#12、css伪类问题：" class="headerlink" title="12、css伪类问题："></a>12、css伪类问题：</h4><p>将用伪类实现的效果换成其他实现方式；<br><br>主要是针对IE7内核，如果不用兼容IE7内核，则不用处理此类问题。</p>
<h4 id="13、ul元素中li-两端顶头，间距均等问题"><a href="#13、ul元素中li-两端顶头，间距均等问题" class="headerlink" title="13、ul元素中li 两端顶头，间距均等问题"></a>13、ul元素中li 两端顶头，间距均等问题</h4><p>li使用float为left，加上margin-left,<br>然后ul同时也加上margin-left，其值使用与li相对应的负值,如：<br><br>html:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;ul class="parent"&gt;</div><div class="line">  &lt;li class="child"&gt;测试&lt;/li&gt;</div><div class="line">  &lt;li class="child"&gt;测试&lt;/li&gt;</div><div class="line">  &lt;li class="child"&gt;测试&lt;/li&gt;</div><div class="line">  &lt;li class="child"&gt;测试&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure></p>
<p>css:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">.parent&#123;</div><div class="line">  width 1200px;</div><div class="line">  margin-left: -20px;</div><div class="line">  *zoom:1;</div><div class="line">&#125;</div><div class="line">.parent .child&#123;</div><div class="line">  width 280px;</div><div class="line">  height:400px;</div><div class="line">  margin-left: 20px;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="14、background-size-cover"><a href="#14、background-size-cover" class="headerlink" title="14、background-size: cover"></a>14、background-size: cover</h4><p>如果你想使用background-size: cover设置全屏背景， <br><br>很遗憾IE8办不到…但可以使用IE独有的AlphaImageLoader滤镜来实现，添加一条如下的CSS样式： <br><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.box</span>&#123;</div><div class="line">   <span class="attribute">background-size</span>: cover;</div><div class="line">   <span class="attribute">filter</span>: progid:DXImageTransform.Microsoft.<span class="built_in">AlphaImageLoader</span>(sizingMethod=scale , src=<span class="string">'image.img'</span>)\<span class="number">9</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>将sizingMethod设置为scale，src设置成背景图片地址就OK了。<br><br>还没完，如果你在此背景之上放置了链接，那这个链接是无法点击的。<br><br>一般情况下的解决办法是为链接或按钮添加position:relative使其相对浮动。</p>
<h4 id="15、last-child"><a href="#15、last-child" class="headerlink" title="15、last-child"></a>15、last-child</h4><p>first-child是CSS2的内容，但是last-child就不是了，所以IE8不买账。<br><br>推荐的做法不是使用last-child，而是给最后一个元素设置一个.last的class，然后对此进行样式设置，这样就全部兼容了。</p>
<h4 id="16、Media-Query-媒体查询"><a href="#16、Media-Query-媒体查询" class="headerlink" title="16、Media Query(媒体查询)"></a>16、Media Query(媒体查询)</h4><p>IE8似乎无法识别Media Query，所以需要hack一下啦！推荐采用Respond.js解决此问题。<br><br>Respond.js让IE6-8支持CSS3 Media Query。<br><br>Bootstrap里面就引入了这个js文件，从名字看出来是自适应的兼容。<br><br>使用：考虑到IE9是支持CSS3的，所以直接在HTML页面的head标签中添加脚本引用即可：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--[if lt IE 9]&gt;</span></div><div class="line">  &lt;script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"&gt;&lt;/script&gt;</div><div class="line">&lt;![endif]—&gt;</div></pre></td></tr></table></figure></p>
<p>官方demo地址：<a href="http://scottjehl.github.com/Respond/test/test.html" target="_blank" rel="external">http://scottjehl.github.com/Respond/test/test.html</a></p>
<p>a.在css中正常用 min/max-width media <br><br>b.引入respond.min.js，但要在css的后面 <br><br>（越早引入越好，在ie下面看到页面闪屏的概率就越低，因为最初css会先渲染出来，如果respond.js加载得很后面，这时重新根据media query解析出来的css会再改变一次页面的布局等，所以看起来有闪屏的现象）</p>
<h4 id="17、关于max-width"><a href="#17、关于max-width" class="headerlink" title="17、关于max-width"></a>17、关于max-width</h4><p>a. td中的max-width <br><br>如果针对td中的img元素设置max-width: 100%，在IE和Firefox你会发现不奏效，而在Chrome中却是可以的。<br><br>经查询发现需要给table设置table-layout: fixed.</p>
<p>b. 嵌套标签中的max-width <br><br>如下的HTML结构：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"work-item"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"work-link"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"sample.jpg"</span> <span class="attr">class</span>=<span class="string">"work-image img-responsive"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>最外层元素.work-item设置了固定宽度，但是对img设置max-width为100%却无效.<br><br>后来才发现需要再对a标签设置width: 100%，这样才能使最内层的img标签充满整个div。</p>
<h4 id="18、嵌套inline-block下padding元素重叠"><a href="#18、嵌套inline-block下padding元素重叠" class="headerlink" title="18、嵌套inline-block下padding元素重叠"></a>18、嵌套inline-block下padding元素重叠</h4><p>html:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>CSS：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;</div><div class="line">   <span class="attribute">display</span>: inline-block;</div><div class="line">&#125;</div><div class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span>&#123;</div><div class="line">   <span class="attribute">display</span>: inline-block;</div><div class="line">   <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>按理来说a标签之间的距离应该是30px，但在IE8中出现了重叠，只有15px。<br><br>我的解决方法是使用float: left替代display: inline-block实现水平布局。</p>
<h4 id="19、filter-blur"><a href="#19、filter-blur" class="headerlink" title="19、filter blur"></a>19、filter blur</h4><p>CSS3中提供支持滤镜效果的属性filter，比如支持高斯模糊效果：<br><br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">filter</span>: <span class="selector-tag">blur</span>(10<span class="selector-tag">px</span>);</div><div class="line"><span class="selector-tag">-webkit-filter</span>: <span class="selector-tag">blur</span>(10<span class="selector-tag">px</span>);</div><div class="line"><span class="selector-tag">-moz-filter</span>: <span class="selector-tag">blur</span>(10<span class="selector-tag">px</span>);</div></pre></td></tr></table></figure></p>
<p>IE8对filter: blur(10px)的显示效果是对HTML元素进行小范围的模糊处理，这个效果并不是高斯模糊<br><br>要想支持高斯模糊，需要如下设置：<br><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius='10');</div></pre></td></tr></table></figure></p>
<p>在实践中发现一个坑就是，所有position: relative的元素都不会生效。<br><br>其他的发现是，IE9对filter: blur(10px)无效，<br><br>而对filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=’10’),是针对元素小范围的模糊效果。</p>
<h3 id="sect-参考"><a href="#sect-参考" class="headerlink" title="&sect; 参考"></a><a name="reference">&sect; 参考</a></h3><ul>
<li><a href="https://www.npmjs.com/" target="_blank" rel="external">npmjs</a></li>
<li><a href="http://www.gulpjs.com.cn/" target="_blank" rel="external">gulpjs</a></li>
<li><a href="https://babeljs.cn/" target="_blank" rel="external">babel</a></li>
</ul>

          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/获取开始时间和结束时间/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/获取开始时间和结束时间/" itemprop="url">获取一周内，一月内，一年内的开始时间和结束时间</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:03:02+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">// 时间格式</div><div class="line"></div><div class="line">function formatDate(now)   &#123; </div><div class="line">    var now=new Date(now);    </div><div class="line">    var year=now.getFullYear();     </div><div class="line">    var month=now.getMonth()+1;     </div><div class="line">    var date=now.getDate();     </div><div class="line">    var hour=now.getHours();     </div><div class="line">    var minute=now.getMinutes();     </div><div class="line">    var second=now.getSeconds();     </div><div class="line">    return   year+&quot;-&quot;+addZero(month)+&quot;-&quot;+addZero(date)+&quot; &quot;+addZero(hour)+&quot;:&quot;+addZero(minute)+&quot;:&quot;+addZero(second);     </div><div class="line">     </div><div class="line">//时间范围</div><div class="line"></div><div class="line">function durTime(param)&#123;</div><div class="line">    var date = new Date()*1;</div><div class="line">    var timeStr = &#123;&#125;;</div><div class="line">    //开始时间</div><div class="line">    timeStr.startTime = formatDate(date);</div><div class="line">    if(param == &quot;day&quot;)&#123;</div><div class="line">        var endStr = date-24*60*60*1000;</div><div class="line">        timeStr.endTime = formatDate(endStr);</div><div class="line">    &#125;else if(param == &quot;week&quot;)&#123;</div><div class="line">        var endStr = date-7*24*60*60*1000;</div><div class="line">        timeStr.endTime = formatDate(endStr);</div><div class="line">    &#125;else if(param == &quot;month&quot;)&#123;</div><div class="line">        var endStr = date-30*24*60*60*1000;</div><div class="line">        timeStr.endTime = formatDate(endStr);</div><div class="line">    &#125;else if(param == &quot;year&quot;)&#123;</div><div class="line">        var endStr = date-365*24*60*60*1000;</div><div class="line">        timeStr.endTime = formatDate(endStr);</div><div class="line">    &#125;</div><div class="line">    return timeStr</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 补零</div><div class="line"></div><div class="line">function addZero(val)&#123;</div><div class="line">    if(val&gt;=10)&#123;</div><div class="line">        return val;</div><div class="line">    &#125;else&#123;</div><div class="line">        return &quot;0&quot;+val;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 调用</div><div class="line"></div><div class="line">console.log( durTime(&quot;day&quot;) );</div><div class="line">console.log( durTime(&quot;week&quot;) );</div><div class="line">console.log( durTime(&quot;month&quot;) );</div><div class="line">console.log( durTime(&quot;year&quot;) );</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/点击排除控件元素/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/点击排除控件元素/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:03:02+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h2 id="点击页面排除控件让控件隐藏"><a href="#点击页面排除控件让控件隐藏" class="headerlink" title="点击页面排除控件让控件隐藏"></a>点击页面排除控件让控件隐藏</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$(document).click(function(e)&#123;</div><div class="line">            var a = e.target</div><div class="line">            var b = $(&quot;#ztree&quot;)[0];</div><div class="line">            console.log(a,b,$.contains(a,b))</div><div class="line">            if($.contains(b,a))&#123;</div><div class="line">//当点击元素在$(&quot;#ztree&quot;)里面的时候</div><div class="line">                return false;</div><div class="line">            &#125;else&#123;</div><div class="line">                $(&quot;#ztree&quot;).hide()</div><div class="line">            &#125;</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h1 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="一个DOM节点是否包含另一个DOM节点。"><a href="#一个DOM节点是否包含另一个DOM节点。" class="headerlink" title="一个DOM节点是否包含另一个DOM节点。"></a>一个DOM节点是否包含另一个DOM节点。</h3><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h4 id="container-containedObject-ObjectV1-4"><a href="#container-containedObject-ObjectV1-4" class="headerlink" title="container,containedObject,ObjectV1.4"></a>container,containedObject,ObjectV1.4</h4><h4 id="container-DOM元素作为容器，可以包含其他元素"><a href="#container-DOM元素作为容器，可以包含其他元素" class="headerlink" title="container:DOM元素作为容器，可以包含其他元素"></a>container:DOM元素作为容器，可以包含其他元素</h4><h4 id="contained-DOM节点，可能被其他元素所包含"><a href="#contained-DOM节点，可能被其他元素所包含" class="headerlink" title="contained:DOM节点，可能被其他元素所包含"></a>contained:DOM节点，可能被其他元素所包含</h4><h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><h2 id="描述"><a href="#描述" class="headerlink" title="描述:"></a>描述:</h2><h3 id="检测一个元素是否包含另一个元素"><a href="#检测一个元素是否包含另一个元素" class="headerlink" title="检测一个元素是否包含另一个元素"></a>检测一个元素是否包含另一个元素</h3><h4 id="jQuery-代码"><a href="#jQuery-代码" class="headerlink" title="jQuery 代码:"></a>jQuery 代码:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">jQuery.contains(document.documentElement, document.body); // true</div><div class="line">jQuery.contains(document.body, document.documentElement); // false</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/媒体查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/媒体查询/" itemprop="url">媒体查询</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:03:02+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h1><h2 id="设备尺寸参考-：Mobile-devices"><a href="#设备尺寸参考-：Mobile-devices" class="headerlink" title="设备尺寸参考 ：Mobile devices"></a>设备尺寸参考 ：Mobile devices</h2><h2 id="媒体查询类型浏览器支持情况：CSS3-Media-Queries-overview"><a href="#媒体查询类型浏览器支持情况：CSS3-Media-Queries-overview" class="headerlink" title="媒体查询类型浏览器支持情况：CSS3 Media Queries overview"></a>媒体查询类型浏览器支持情况：CSS3 Media Queries overview</h2><h1 id="常用查询语句"><a href="#常用查询语句" class="headerlink" title="常用查询语句"></a>常用查询语句</h1><h2 id="判断设备横竖屏"><a href="#判断设备横竖屏" class="headerlink" title="判断设备横竖屏"></a>判断设备横竖屏</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div></pre></td><td class="code"><pre><div class="line">/* 横屏 */</div><div class="line">@media all and (orientation :landscape) &#123;</div><div class="line">&#125; </div><div class="line">/* 竖屏 */</div><div class="line">@media all and (orientation :portrait) &#123;</div><div class="line">&#125;</div><div class="line">判断设备宽高</div><div class="line"></div><div class="line">/* 设备宽度大于 320px 小于 640px */</div><div class="line">@media all and (min-width:320px) and (max-width:640px) &#123;</div><div class="line">    </div><div class="line">&#125;</div><div class="line">判断设备像素比</div><div class="line"></div><div class="line">/* 设备像素比为 1 */</div><div class="line">@media only screen and (-webkit-min-device-pixel-ratio: 1), only screen and (min-device-pixel-ratio: 1) &#123;</div><div class="line">    </div><div class="line">&#125;</div><div class="line">/* 设备像素比为 1.5 */</div><div class="line">@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min-device-pixel-ratio: 1.5) &#123;</div><div class="line">    </div><div class="line">&#125;</div><div class="line">/* 设备像素比为 2 */</div><div class="line">@media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2) &#123;</div><div class="line">    </div><div class="line">&#125;</div><div class="line">常用设备设置</div><div class="line">iPhones</div><div class="line">/* ----------- iPhone 4 and 4S ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 320px) </div><div class="line">  and (max-device-width: 480px)</div><div class="line">  and (-webkit-min-device-pixel-ratio: 2) &#123;</div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 320px) </div><div class="line">  and (max-device-width: 480px)</div><div class="line">  and (-webkit-min-device-pixel-ratio: 2)</div><div class="line">  and (orientation: portrait) &#123;</div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 320px) </div><div class="line">  and (max-device-width: 480px)</div><div class="line">  and (-webkit-min-device-pixel-ratio: 2)</div><div class="line">  and (orientation: landscape) &#123;</div><div class="line">&#125;</div><div class="line">/* ----------- iPhone 5 and 5S ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 320px) </div><div class="line">  and (max-device-width: 568px)</div><div class="line">  and (-webkit-min-device-pixel-ratio: 2) &#123;</div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 320px) </div><div class="line">  and (max-device-width: 568px)</div><div class="line">  and (-webkit-min-device-pixel-ratio: 2)</div><div class="line">  and (orientation: portrait) &#123;</div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 320px) </div><div class="line">  and (max-device-width: 568px)</div><div class="line">  and (-webkit-min-device-pixel-ratio: 2)</div><div class="line">  and (orientation: landscape) &#123;</div><div class="line">&#125;</div><div class="line">/* ----------- iPhone 6 ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 375px) </div><div class="line">  and (max-device-width: 667px) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 2) &#123; </div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 375px) </div><div class="line">  and (max-device-width: 667px) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 2)</div><div class="line">  and (orientation: portrait) &#123; </div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 375px) </div><div class="line">  and (max-device-width: 667px) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 2)</div><div class="line">  and (orientation: landscape) &#123; </div><div class="line">&#125;</div><div class="line">/* ----------- iPhone 6+ ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 414px) </div><div class="line">  and (max-device-width: 736px) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 3) &#123; </div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 414px) </div><div class="line">  and (max-device-width: 736px) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 3)</div><div class="line">  and (orientation: portrait) &#123; </div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 414px) </div><div class="line">  and (max-device-width: 736px) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 3)</div><div class="line">  and (orientation: landscape) &#123; </div><div class="line">&#125;</div><div class="line">Galaxy Phones</div><div class="line">/* ----------- Galaxy S3 ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media screen </div><div class="line">  and (device-width: 320px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 2) &#123;</div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media screen </div><div class="line">  and (device-width: 320px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 2) </div><div class="line">  and (orientation: portrait) &#123;</div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media screen </div><div class="line">  and (device-width: 320px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 2) </div><div class="line">  and (orientation: landscape) &#123;</div><div class="line">&#125;</div><div class="line">/* ----------- Galaxy S4 ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media screen </div><div class="line">  and (device-width: 320px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 3) &#123;</div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media screen </div><div class="line">  and (device-width: 320px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 3) </div><div class="line">  and (orientation: portrait) &#123;</div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media screen </div><div class="line">  and (device-width: 320px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 3) </div><div class="line">  and (orientation: landscape) &#123;</div><div class="line">&#125;</div><div class="line">/* ----------- Galaxy S5 ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media screen </div><div class="line">  and (device-width: 360px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 3) &#123;</div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media screen </div><div class="line">  and (device-width: 360px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 3) </div><div class="line">  and (orientation: portrait) &#123;</div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media screen </div><div class="line">  and (device-width: 360px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 3) </div><div class="line">  and (orientation: landscape) &#123;</div><div class="line">&#125;</div><div class="line">HTC Phones</div><div class="line">/* ----------- HTC One ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media screen </div><div class="line">  and (device-width: 360px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 3) &#123;</div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media screen </div><div class="line">  and (device-width: 360px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 3) </div><div class="line">  and (orientation: portrait) &#123;</div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media screen </div><div class="line">  and (device-width: 360px) </div><div class="line">  and (device-height: 640px) </div><div class="line">  and (-webkit-device-pixel-ratio: 3) </div><div class="line">  and (orientation: landscape) &#123;</div><div class="line">&#125;</div><div class="line">iPads</div><div class="line">/* ----------- iPad mini ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 768px) </div><div class="line">  and (max-device-width: 1024px) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 1) &#123;</div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 768px) </div><div class="line">  and (max-device-width: 1024px) </div><div class="line">  and (orientation: portrait) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 1) &#123;</div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 768px) </div><div class="line">  and (max-device-width: 1024px) </div><div class="line">  and (orientation: landscape) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 1) &#123;</div><div class="line">&#125;</div><div class="line">/* ----------- iPad 1 and 2 ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 768px) </div><div class="line">  and (max-device-width: 1024px) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 1) &#123;</div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 768px) </div><div class="line">  and (max-device-width: 1024px) </div><div class="line">  and (orientation: portrait) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 1) &#123;</div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 768px) </div><div class="line">  and (max-device-width: 1024px) </div><div class="line">  and (orientation: landscape) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 1) &#123;</div><div class="line">&#125;</div><div class="line">/* ----------- iPad 3 and 4 ----------- */</div><div class="line">/* Portrait and Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 768px) </div><div class="line">  and (max-device-width: 1024px) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 2) &#123;</div><div class="line">&#125;</div><div class="line">/* Portrait */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 768px) </div><div class="line">  and (max-device-width: 1024px) </div><div class="line">  and (orientation: portrait) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 2) &#123;</div><div class="line">&#125;</div><div class="line">/* Landscape */</div><div class="line">@media only screen </div><div class="line">  and (min-device-width: 768px) </div><div class="line">  and (max-device-width: 1024px) </div><div class="line">  and (orientation: landscape) </div><div class="line">  and (-webkit-min-device-pixel-ratio: 2) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/vuex使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/vuex使用/" itemprop="url">第一次使用vuex</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:03:02+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="首先在main-js里面使用vuex，state里面声明一些储存的值，通过mutations去改变state里面的状态值。代码如下："><a href="#首先在main-js里面使用vuex，state里面声明一些储存的值，通过mutations去改变state里面的状态值。代码如下：" class="headerlink" title="首先在main.js里面使用vuex，state里面声明一些储存的值，通过mutations去改变state里面的状态值。代码如下："></a>首先在main.js里面使用vuex，state里面声明一些储存的值，通过mutations去改变state里面的状态值。代码如下：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">import Vuex from &apos;vuex&apos;</div><div class="line"></div><div class="line">Vue.use(Vuex);</div><div class="line">const store = new Vuex.Store(&#123;</div><div class="line">    state: &#123;</div><div class="line">        count: false</div><div class="line">    &#125;,</div><div class="line">    mutations: &#123;</div><div class="line">        changeState (state, payload) &#123;</div><div class="line">            state.count = payload.val</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">//需要把store放在vue里面</div><div class="line">new Vue(&#123;</div><div class="line">  el: &apos;#app&apos;,</div><div class="line">  router,</div><div class="line">  store,</div><div class="line">  template: &apos;&lt;App/&gt;&apos;,</div><div class="line">  components: &#123; App &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="然后在登陆页面修改store状态值由于vuex只是一个状态值，因此刷新页面的时候改变的值回还原初始化，因此需要结合sessionStorage，代码如下："><a href="#然后在登陆页面修改store状态值由于vuex只是一个状态值，因此刷新页面的时候改变的值回还原初始化，因此需要结合sessionStorage，代码如下：" class="headerlink" title="然后在登陆页面修改store状态值由于vuex只是一个状态值，因此刷新页面的时候改变的值回还原初始化，因此需要结合sessionStorage，代码如下："></a>然后在登陆页面修改store状态值由于vuex只是一个状态值，因此刷新页面的时候改变的值回还原初始化，因此需要结合sessionStorage，代码如下：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sessionStorage.setItem(&apos;loginState&apos;,this.userName)</div><div class="line">this.$store.commit(&apos;changeState&apos;,&#123;val: true&#125;);</div></pre></td></tr></table></figure>
<h2 id="最后在页面判断是否登陆，代码如下"><a href="#最后在页面判断是否登陆，代码如下" class="headerlink" title="最后在页面判断是否登陆，代码如下"></a>最后在页面判断是否登陆，代码如下</h2>
          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/vueX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/vueX/" itemprop="url">vuex最简单、最详细的入门文档</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:03:02+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="如果你在使用-vue-js-那么我想你可能会对-vue-组件之间的通信感到崩溃-。"><a href="#如果你在使用-vue-js-那么我想你可能会对-vue-组件之间的通信感到崩溃-。" class="headerlink" title="如果你在使用 vue.js , 那么我想你可能会对 vue 组件之间的通信感到崩溃 。"></a>如果你在使用 vue.js , 那么我想你可能会对 vue 组件之间的通信感到崩溃 。</h2><p>我在使用基于 vue.js 2.0 的UI框架 ElementUI 开发网站的时候 , 就遇到了这种问题 : 一个页面有很多表单 , 我试图将表单写成一个单文件组件 , 但是表单 ( 子组件 ) 里的数据和页面 ( 父组件 ) 按钮交互的时候 , 它们之间的通讯很麻烦 :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">&lt;!--父组件中引入子组件--&gt;</div><div class="line">&lt;template&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;a href=&quot;javascript:;&quot; @click=&quot;show = true&quot;&gt;点击&lt;/a&gt;</div><div class="line">    &lt;t-dialog :show.sync=&quot;show&quot;&gt;&lt;/t-dialog&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">import dialog from &apos;./components/dialog.vue&apos;</div><div class="line">export default &#123;</div><div class="line">  data()&#123;</div><div class="line">    return &#123;</div><div class="line">      show:false</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  components:&#123;</div><div class="line">    &quot;t-dialog&quot;:dialog</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;!--子组件--&gt;</div><div class="line">&lt;template&gt;</div><div class="line">  &lt;el-dialog :visible.sync=&quot;currentShow&quot;&gt;&lt;/el-dialog&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">export default &#123;</div><div class="line">  props:[&apos;show&apos;],</div><div class="line">  computed:&#123;</div><div class="line">      currentShow:&#123;</div><div class="line">          get()&#123;</div><div class="line">              return this.show</div><div class="line">          &#125;,</div><div class="line">          set(val)&#123;</div><div class="line">              this.$emit(&quot;update:show&quot;,val)</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<h2 id="之所以这么麻烦-是因为父组件可以通过-props-给子组件传递参数-但子组件内却不能直接修改父组件传过来的参数。"><a href="#之所以这么麻烦-是因为父组件可以通过-props-给子组件传递参数-但子组件内却不能直接修改父组件传过来的参数。" class="headerlink" title="之所以这么麻烦 , 是因为父组件可以通过 props 给子组件传递参数 , 但子组件内却不能直接修改父组件传过来的参数。"></a>之所以这么麻烦 , 是因为父组件可以通过 props 给子组件传递参数 , 但子组件内却不能直接修改父组件传过来的参数。</h2><p>这时候 , 使用 vuex 就可以比较方便的解决这种问题了 :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;!--父组件中引入子组件--&gt;</div><div class="line">&lt;template&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;a href=&quot;javascript:;&quot; @click=&quot;$store.state.show = true&quot;&gt;点击&lt;/a&gt;</div><div class="line">    &lt;t-dialog&gt;&lt;/t-dialog&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">import dialog from &apos;./components/dialog.vue&apos;</div><div class="line">export default &#123;</div><div class="line">  components:&#123;</div><div class="line">    &quot;t-dialog&quot;:dialog</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;!--子组件--&gt;</div><div class="line">&lt;template&gt;</div><div class="line">  &lt;el-dialog :visible.sync=&quot;$store.state.show&quot;&gt;&lt;/el-dialog&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">export default &#123;&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<h2 id="是不是方便了许多-这就是-vuex-最简单的应用-不要被网上其他教程吓到-vuex-原来可以这么简单"><a href="#是不是方便了许多-这就是-vuex-最简单的应用-不要被网上其他教程吓到-vuex-原来可以这么简单" class="headerlink" title="是不是方便了许多 , 这就是 vuex 最简单的应用 , 不要被网上其他教程吓到 , vuex 原来可以这么简单 !"></a>是不是方便了许多 , 这就是 vuex 最简单的应用 , 不要被网上其他教程吓到 , vuex 原来可以这么简单 !</h2><p>安装、使用 vuex<br>首先我们在 vue.js 2.0 开发环境中安装 vuex :<br>npm install vuex –save</p>
<p>然后 , 在 main.js 中加入 :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">import vuex from &apos;vuex&apos;</div><div class="line">Vue.use(vuex);</div><div class="line">var store = new vuex.Store(&#123;//store对象</div><div class="line">    state:&#123;</div><div class="line">        show:false</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h2 id="再然后-在实例化-Vue对象时加入-store-对象"><a href="#再然后-在实例化-Vue对象时加入-store-对象" class="headerlink" title="再然后 , 在实例化 Vue对象时加入 store 对象 :"></a>再然后 , 在实例化 Vue对象时加入 store 对象 :</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">new Vue(&#123;</div><div class="line">  el: &apos;#app&apos;,</div><div class="line">  router,</div><div class="line">  store,//使用store</div><div class="line">  template: &apos;&lt;App/&gt;&apos;,</div><div class="line">  components: &#123; App &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="完成到这一步-上述例子中的-store-state-show-就可以使用了。"><a href="#完成到这一步-上述例子中的-store-state-show-就可以使用了。" class="headerlink" title="完成到这一步 , 上述例子中的 $store.state.show 就可以使用了。"></a>完成到这一步 , 上述例子中的 $store.state.show 就可以使用了。</h2><h2 id="modules"><a href="#modules" class="headerlink" title="modules"></a>modules</h2><h3 id="前面为了方便-我们把-store-对象写在了-main-js-里面-但实际上为了便于日后的维护-我们分开写更好-我们在-src-目录下-新建一个-store-文件夹-然后在里面新建一个-index-js"><a href="#前面为了方便-我们把-store-对象写在了-main-js-里面-但实际上为了便于日后的维护-我们分开写更好-我们在-src-目录下-新建一个-store-文件夹-然后在里面新建一个-index-js" class="headerlink" title="前面为了方便 , 我们把 store 对象写在了 main.js 里面 , 但实际上为了便于日后的维护 , 我们分开写更好 , 我们在 src 目录下 , 新建一个 store 文件夹 , 然后在里面新建一个 index.js :"></a>前面为了方便 , 我们把 store 对象写在了 main.js 里面 , 但实际上为了便于日后的维护 , 我们分开写更好 , 我们在 src 目录下 , 新建一个 store 文件夹 , 然后在里面新建一个 index.js :</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import Vue from &apos;vue&apos;</div><div class="line">import vuex from &apos;vuex&apos;</div><div class="line">Vue.use(vuex);</div><div class="line"></div><div class="line">export default new vuex.Store(&#123;</div><div class="line">    state:&#123;</div><div class="line">        show:false</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="那么相应的-在-main-js-里的代码应该改成"><a href="#那么相应的-在-main-js-里的代码应该改成" class="headerlink" title="那么相应的 , 在 main.js 里的代码应该改成 :"></a>那么相应的 , 在 main.js 里的代码应该改成 :</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//vuex</div><div class="line">import store from &apos;./store&apos;</div><div class="line"></div><div class="line">new Vue(&#123;</div><div class="line">  el: &apos;#app&apos;,</div><div class="line">  router,</div><div class="line">  store,//使用store</div><div class="line">  template: &apos;&lt;App/&gt;&apos;,</div><div class="line">  components: &#123; App &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="这样就把-store-分离出去了-那么还有一个问题是-这里-store-state-show-无论哪个组件都可以使用-那组件多了之后-状态也多了-这么多状态都堆在-store-文件夹下的-index-js-不好维护怎么办"><a href="#这样就把-store-分离出去了-那么还有一个问题是-这里-store-state-show-无论哪个组件都可以使用-那组件多了之后-状态也多了-这么多状态都堆在-store-文件夹下的-index-js-不好维护怎么办" class="headerlink" title="这样就把 store 分离出去了 , 那么还有一个问题是 : 这里 $store.state.show 无论哪个组件都可以使用 , 那组件多了之后 , 状态也多了 , 这么多状态都堆在 store 文件夹下的 index.js 不好维护怎么办 ?"></a>这样就把 store 分离出去了 , 那么还有一个问题是 : 这里 $store.state.show 无论哪个组件都可以使用 , 那组件多了之后 , 状态也多了 , 这么多状态都堆在 store 文件夹下的 index.js 不好维护怎么办 ?</h3><p>我们可以使用 vuex 的 modules , 把 store 文件夹下的 index.js 改成 :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">import Vue from &apos;vue&apos;</div><div class="line">import vuex from &apos;vuex&apos;</div><div class="line">Vue.use(vuex);</div><div class="line"></div><div class="line">import dialog_store from &apos;../components/dialog_store.js&apos;;//引入某个store对象</div><div class="line"></div><div class="line">export default new vuex.Store(&#123;</div><div class="line">    modules: &#123;</div><div class="line">        dialog: dialog_store</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h3 id="这里我们引用了一个-dialog-store-js-在这个-js-文件里我们就可以单独写-dialog-组件的状态了"><a href="#这里我们引用了一个-dialog-store-js-在这个-js-文件里我们就可以单独写-dialog-组件的状态了" class="headerlink" title="这里我们引用了一个 dialog_store.js , 在这个 js 文件里我们就可以单独写 dialog 组件的状态了 :"></a>这里我们引用了一个 dialog_store.js , 在这个 js 文件里我们就可以单独写 dialog 组件的状态了 :</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">export default &#123;</div><div class="line">    state:&#123;</div><div class="line">        show:false</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="做出这样的修改之后-我们将之前我们使用的-store-state-show-统统改为-store-state-dialog-show-即可。"><a href="#做出这样的修改之后-我们将之前我们使用的-store-state-show-统统改为-store-state-dialog-show-即可。" class="headerlink" title="做出这样的修改之后 , 我们将之前我们使用的 $store.state.show 统统改为 $store.state.dialog.show 即可。"></a>做出这样的修改之后 , 我们将之前我们使用的 $store.state.show 统统改为 $store.state.dialog.show 即可。</h3><p>如果还有其他的组件需要使用 vuex , 就新建一个对应的状态文件 , 然后将他们加入 store 文件夹下的 index.js 文件中的 modules 中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">modules: &#123;</div><div class="line">    dialog: dialog_store,</div><div class="line">    other: other,//其他组件</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="mutations"><a href="#mutations" class="headerlink" title="mutations"></a>mutations</h2><h3 id="前面我们提到的对话框例子-我们对vuex-的依赖仅仅只有一个-store-state-dialog-show-一个状态-但是如果我们要进行一个操作-需要依赖很多很多个状态-那管理起来又麻烦了"><a href="#前面我们提到的对话框例子-我们对vuex-的依赖仅仅只有一个-store-state-dialog-show-一个状态-但是如果我们要进行一个操作-需要依赖很多很多个状态-那管理起来又麻烦了" class="headerlink" title="前面我们提到的对话框例子 , 我们对vuex 的依赖仅仅只有一个 $store.state.dialog.show 一个状态 , 但是如果我们要进行一个操作 , 需要依赖很多很多个状态 , 那管理起来又麻烦了 !"></a>前面我们提到的对话框例子 , 我们对vuex 的依赖仅仅只有一个 $store.state.dialog.show 一个状态 , 但是如果我们要进行一个操作 , 需要依赖很多很多个状态 , 那管理起来又麻烦了 !</h3><p>mutations 登场 , 问题迎刃而解 :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">export default &#123;</div><div class="line">    state:&#123;//state</div><div class="line">        show:false</div><div class="line">    &#125;,</div><div class="line">    mutations:&#123;</div><div class="line">        switch_dialog(state)&#123;//这里的state对应着上面这个state</div><div class="line">            state.show = state.show?false:true;</div><div class="line">            //你还可以在这里执行其他的操作改变state</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="使用-mutations-后-原先我们的父组件可以改为"><a href="#使用-mutations-后-原先我们的父组件可以改为" class="headerlink" title="使用 mutations 后 , 原先我们的父组件可以改为 :"></a>使用 mutations 后 , 原先我们的父组件可以改为 :</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">  &lt;div id=&quot;app&quot;&gt;</div><div class="line">    &lt;a href=&quot;javascript:;&quot; @click=&quot;$store.commit(&apos;switch_dialog&apos;)&quot;&gt;点击&lt;/a&gt;</div><div class="line">    &lt;t-dialog&gt;&lt;/t-dialog&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">import dialog from &apos;./components/dialog.vue&apos;</div><div class="line">export default &#123;</div><div class="line">  components:&#123;</div><div class="line">    &quot;t-dialog&quot;:dialog</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="使用-store-commit-‘switch-dialog’-来触发-mutations-中的-switch-dialog-方法。"><a href="#使用-store-commit-‘switch-dialog’-来触发-mutations-中的-switch-dialog-方法。" class="headerlink" title="使用 $store.commit(‘switch_dialog’) 来触发 mutations 中的 switch_dialog 方法。"></a>使用 $store.commit(‘switch_dialog’) 来触发 mutations 中的 switch_dialog 方法。</h3><p>这里需要注意的是:</p>
<h3 id="1-mutations-中的方法是不分组件的-假如你在-dialog-stroe-js-文件中的定义了"><a href="#1-mutations-中的方法是不分组件的-假如你在-dialog-stroe-js-文件中的定义了" class="headerlink" title="1. mutations 中的方法是不分组件的 , 假如你在 dialog_stroe.js 文件中的定义了"></a>1. mutations 中的方法是不分组件的 , 假如你在 dialog_stroe.js 文件中的定义了</h3><p>switch_dialog 方法 , 在其他文件中的一个 switch_dialog 方法 , 那么<br>$store.commit(‘switch_dialog’) 会执行所有的 switch_dialog 方法。</p>
<h3 id="2-mutations里的操作必须是同步的。"><a href="#2-mutations里的操作必须是同步的。" class="headerlink" title="2. mutations里的操作必须是同步的。"></a>2. mutations里的操作必须是同步的。</h3><h3 id="你一定好奇-如果在-mutations-里执行异步操作会发生什么事情-实际上并不会发生什么奇怪的事情-只是官方推荐-不要在-mutationss-里执行异步操作而已。"><a href="#你一定好奇-如果在-mutations-里执行异步操作会发生什么事情-实际上并不会发生什么奇怪的事情-只是官方推荐-不要在-mutationss-里执行异步操作而已。" class="headerlink" title="你一定好奇 , 如果在 mutations 里执行异步操作会发生什么事情 , 实际上并不会发生什么奇怪的事情 , 只是官方推荐 , 不要在 mutationss 里执行异步操作而已。"></a>你一定好奇 , 如果在 mutations 里执行异步操作会发生什么事情 , 实际上并不会发生什么奇怪的事情 , 只是官方推荐 , 不要在 mutationss 里执行异步操作而已。</h3><h2 id="actions"><a href="#actions" class="headerlink" title="actions"></a>actions</h2><h3 id="多个-state-的操作-使用-mutations-会来触发会比较好维护-那么需要执行多个-mutations-就需要用-action-了"><a href="#多个-state-的操作-使用-mutations-会来触发会比较好维护-那么需要执行多个-mutations-就需要用-action-了" class="headerlink" title="多个 state 的操作 , 使用 mutations 会来触发会比较好维护 , 那么需要执行多个 mutations 就需要用 action 了:"></a>多个 state 的操作 , 使用 mutations 会来触发会比较好维护 , 那么需要执行多个 mutations 就需要用 action 了:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">export default &#123;</div><div class="line">    state:&#123;//state</div><div class="line">        show:false</div><div class="line">    &#125;,</div><div class="line">    mutations:&#123;</div><div class="line">        switch_dialog(state)&#123;//这里的state对应着上面这个state</div><div class="line">            state.show = state.show?false:true;</div><div class="line">            //你还可以在这里执行其他的操作改变state</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    actions:&#123;</div><div class="line">        switch_dialog(context)&#123;//这里的context和我们使用的$store拥有相同的对象和方法</div><div class="line">            context.commit(&apos;switch_dialog&apos;);</div><div class="line">            //你还可以在这里触发其他的mutations方法</div><div class="line">        &#125;,</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="那么-在之前的父组件中-我们需要做修改-来触发-action-里的-switch-dialog-方法"><a href="#那么-在之前的父组件中-我们需要做修改-来触发-action-里的-switch-dialog-方法" class="headerlink" title="那么 , 在之前的父组件中 , 我们需要做修改 , 来触发 action 里的 switch_dialog 方法:"></a>那么 , 在之前的父组件中 , 我们需要做修改 , 来触发 action 里的 switch_dialog 方法:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">  &lt;div id=&quot;app&quot;&gt;</div><div class="line">    &lt;a href=&quot;javascript:;&quot; @click=&quot;$store.dispatch(&apos;switch_dialog&apos;)&quot;&gt;点击&lt;/a&gt;</div><div class="line">    &lt;t-dialog&gt;&lt;/t-dialog&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">import dialog from &apos;./components/dialog.vue&apos;</div><div class="line">export default &#123;</div><div class="line">  components:&#123;</div><div class="line">    &quot;t-dialog&quot;:dialog</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="使用-store-dispatch-‘switch-dialog’-来触发-action-中的-switch-dialog-方法。"><a href="#使用-store-dispatch-‘switch-dialog’-来触发-action-中的-switch-dialog-方法。" class="headerlink" title="使用 $store.dispatch(‘switch_dialog’) 来触发 action 中的 switch_dialog 方法。"></a>使用 $store.dispatch(‘switch_dialog’) 来触发 action 中的 switch_dialog 方法。</h3><h3 id="官方推荐-将异步操作放在-action-中。"><a href="#官方推荐-将异步操作放在-action-中。" class="headerlink" title="官方推荐 , 将异步操作放在 action 中。"></a>官方推荐 , 将异步操作放在 action 中。</h3><h2 id="getters"><a href="#getters" class="headerlink" title="getters"></a>getters</h2><h3 id="getters-和-vue-中的-computed-类似-都是用来计算-state-然后生成新的数据-状态-的。"><a href="#getters-和-vue-中的-computed-类似-都是用来计算-state-然后生成新的数据-状态-的。" class="headerlink" title="getters 和 vue 中的 computed 类似 , 都是用来计算 state 然后生成新的数据 ( 状态 ) 的。"></a>getters 和 vue 中的 computed 类似 , 都是用来计算 state 然后生成新的数据 ( 状态 ) 的。</h3><p>还是前面的例子 , 假如我们需要一个与状态 show 刚好相反的状态 , 使用 vue 中的 computed 可以这样算出来 :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">computed()&#123;</div><div class="line">    not_show()&#123;</div><div class="line">        return !this.$store.state.dialog.show;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="那么-如果很多很多个组件中都需要用到这个与-show-刚好相反的状态-那么我们需要写很多很多个-not-show-使用-getters-就可以解决这种问题"><a href="#那么-如果很多很多个组件中都需要用到这个与-show-刚好相反的状态-那么我们需要写很多很多个-not-show-使用-getters-就可以解决这种问题" class="headerlink" title="那么 , 如果很多很多个组件中都需要用到这个与 show 刚好相反的状态 , 那么我们需要写很多很多个 not_show , 使用 getters 就可以解决这种问题 :"></a>那么 , 如果很多很多个组件中都需要用到这个与 show 刚好相反的状态 , 那么我们需要写很多很多个 not_show , 使用 getters 就可以解决这种问题 :</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">export default &#123;</div><div class="line">    state:&#123;//state</div><div class="line">        show:false</div><div class="line">    &#125;,</div><div class="line">    getters:&#123;</div><div class="line">        not_show(state)&#123;//这里的state对应着上面这个state</div><div class="line">            return !state.show;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    mutations:&#123;</div><div class="line">        switch_dialog(state)&#123;//这里的state对应着上面这个state</div><div class="line">            state.show = state.show?false:true;</div><div class="line">            //你还可以在这里执行其他的操作改变state</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    actions:&#123;</div><div class="line">        switch_dialog(context)&#123;//这里的context和我们使用的$store拥有相同的对象和方法</div><div class="line">            context.commit(&apos;switch_dialog&apos;);</div><div class="line">            //你还可以在这里触发其他的mutations方法</div><div class="line">        &#125;,</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="我们在组件中使用-store-state-dialog-show-来获得状态-show-类似的-我们可以使用-store-getters-not-show-来获得状态-not-show-。"><a href="#我们在组件中使用-store-state-dialog-show-来获得状态-show-类似的-我们可以使用-store-getters-not-show-来获得状态-not-show-。" class="headerlink" title="我们在组件中使用 $store.state.dialog.show 来获得状态 show , 类似的 , 我们可以使用 $store.getters.not_show 来获得状态 not_show 。"></a>我们在组件中使用 $store.state.dialog.show 来获得状态 show , 类似的 , 我们可以使用 $store.getters.not_show 来获得状态 not_show 。</h3><h3 id="注意-store-getters-not-show-的值是不能直接修改的-需要对应的-state-发生变化才能修改。"><a href="#注意-store-getters-not-show-的值是不能直接修改的-需要对应的-state-发生变化才能修改。" class="headerlink" title="注意 : $store.getters.not_show 的值是不能直接修改的 , 需要对应的 state 发生变化才能修改。"></a>注意 : $store.getters.not_show 的值是不能直接修改的 , 需要对应的 state 发生变化才能修改。</h3><h3 id="mapState、mapGetters、mapActions"><a href="#mapState、mapGetters、mapActions" class="headerlink" title="mapState、mapGetters、mapActions"></a>mapState、mapGetters、mapActions</h3><h3 id="很多时候-store-state-dialog-show-、-store-dispatch-‘switch-dialog’-这种写法又长又臭-很不方便-我们没使用-vuex-的时候-获取一个状态只需要-this-show-执行一个方法只需要-this-switch-dialog-就行了-使用-vuex-使写法变复杂了-使用-mapState、mapGetters、mapActions-就不会这么复杂了。以-mapState-为例"><a href="#很多时候-store-state-dialog-show-、-store-dispatch-‘switch-dialog’-这种写法又长又臭-很不方便-我们没使用-vuex-的时候-获取一个状态只需要-this-show-执行一个方法只需要-this-switch-dialog-就行了-使用-vuex-使写法变复杂了-使用-mapState、mapGetters、mapActions-就不会这么复杂了。以-mapState-为例" class="headerlink" title="很多时候 , $store.state.dialog.show 、$store.dispatch(‘switch_dialog’) 这种写法又长又臭 , 很不方便 , 我们没使用 vuex 的时候 , 获取一个状态只需要 this.show , 执行一个方法只需要 this.switch_dialog 就行了 , 使用 vuex 使写法变复杂了 ?使用 mapState、mapGetters、mapActions 就不会这么复杂了。以 mapState 为例 :"></a>很多时候 , $store.state.dialog.show 、$store.dispatch(‘switch_dialog’) 这种写法又长又臭 , 很不方便 , 我们没使用 vuex 的时候 , 获取一个状态只需要 this.show , 执行一个方法只需要 this.switch_dialog 就行了 , 使用 vuex 使写法变复杂了 ?使用 mapState、mapGetters、mapActions 就不会这么复杂了。以 mapState 为例 :</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">  &lt;el-dialog :visible.sync=&quot;show&quot;&gt;&lt;/el-dialog&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">import &#123;mapState&#125; from &apos;vuex&apos;;</div><div class="line">export default &#123;</div><div class="line">  computed:&#123;</div><div class="line"></div><div class="line">    //这里的三点叫做 : 扩展运算符</div><div class="line">    ...mapState([</div><div class="line">      show:state=&gt;state.dialog.show</div><div class="line">    ]),</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="相当于"><a href="#相当于" class="headerlink" title="相当于 :"></a>相当于 :</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">  &lt;el-dialog :visible.sync=&quot;show&quot;&gt;&lt;/el-dialog&gt;</div><div class="line">&lt;/template&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">import &#123;mapState&#125; from &apos;vuex&apos;;</div><div class="line">export default &#123;</div><div class="line">  computed:&#123;</div><div class="line">    show()&#123;</div><div class="line">        return this.$store.state.dialog.show;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="mapGetters、mapActions-和-mapState-类似-mapGetters-一般也写在-computed-中-mapActions-一般写在-methods-中。弄懂上面这些-你可以去看vuex文档了-应该能看懂了。"><a href="#mapGetters、mapActions-和-mapState-类似-mapGetters-一般也写在-computed-中-mapActions-一般写在-methods-中。弄懂上面这些-你可以去看vuex文档了-应该能看懂了。" class="headerlink" title="mapGetters、mapActions 和 mapState 类似 , mapGetters 一般也写在 computed 中 , mapActions 一般写在 methods 中。弄懂上面这些 , 你可以去看vuex文档了 , 应该能看懂了。"></a>mapGetters、mapActions 和 mapState 类似 , mapGetters 一般也写在 computed 中 , mapActions 一般写在 methods 中。弄懂上面这些 , 你可以去看vuex文档了 , 应该能看懂了。</h3>
          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/rem字体使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/rem字体使用/" itemprop="url">数组处理方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:03:02+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="去除数组中重复对象-思路-：给一个空对象，遍历数组，给空对象赋值，对象的键是数组每项的对象，然后值随便，这样重复的键，赋值同样的值，只会显示一个，达到排重的作用，最后使用Object-keys（）方法提取对象的键反到一个数组中"><a href="#去除数组中重复对象-思路-：给一个空对象，遍历数组，给空对象赋值，对象的键是数组每项的对象，然后值随便，这样重复的键，赋值同样的值，只会显示一个，达到排重的作用，最后使用Object-keys（）方法提取对象的键反到一个数组中" class="headerlink" title="去除数组中重复对象 思路 ：给一个空对象，遍历数组，给空对象赋值，对象的键是数组每项的对象，然后值随便，这样重复的键，赋值同样的值，只会显示一个，达到排重的作用，最后使用Object.keys（）方法提取对象的键反到一个数组中"></a>去除数组中重复对象 思路 ：给一个空对象，遍历数组，给空对象赋值，对象的键是数组每项的对象，然后值随便，这样重复的键，赋值同样的值，只会显示一个，达到排重的作用，最后使用Object.keys（）方法提取对象的键反到一个数组中</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function newArr(arr)&#123;</div><div class="line">    console.log(arr)</div><div class="line">    var unique = &#123;&#125;;</div><div class="line">    arr.forEach(function(a)&#123; </div><div class="line">        console.log(JSON.stringify(a))</div><div class="line">        unique[ JSON.stringify(a) ] = 1 </div><div class="line">    &#125;);</div><div class="line">    console.log( unique )</div><div class="line">    console.log(Object.keys(unique))</div><div class="line">    arr= Object.keys(unique).map(function(u)&#123;return JSON.parse(u) &#125;);</div><div class="line">    return arr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="去除空对象"><a href="#去除空对象" class="headerlink" title="去除空对象"></a>去除空对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let newArr=[];</div><div class="line">for(let j in arr)&#123;</div><div class="line">  for(let prop in arr[j])&#123;</div><div class="line">      if(prop!=&apos;&apos;||arr[j][prop]!=&apos;&apos;)&#123;</div><div class="line">          newArr.push(arr[j]);</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="数组排序"><a href="#数组排序" class="headerlink" title="数组排序"></a>数组排序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var arr = [&#123;name: &quot;zlw&quot;, age: 24&#125;, &#123;name: &quot;wlz&quot;, age: 25&#125;,&#123;name: &quot;alz&quot;, age: 20&#125;];</div><div class="line">function compare(property)&#123;</div><div class="line">    return function(a,b)&#123;</div><div class="line">        console.log(a,b)</div><div class="line">        var value1 = a[property];</div><div class="line">        var value2 = b[property];</div><div class="line">        return value2 - value1;</div><div class="line">    &#125;</div><div class="line">  &#125;            </div><div class="line">console.log(arr.sort(compare(&quot;age&quot;)));</div></pre></td></tr></table></figure>
<h3 id="如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序，说得更精确点，是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。"><a href="#如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序，说得更精确点，是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。" class="headerlink" title="如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序，说得更精确点，是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。"></a>如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序，说得更精确点，是按照字符编码的顺序进行排序。要实现这一点，首先应把数组的元素都转换成字符串（如有必要），以便进行比较。</h3><h3 id="如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数-a-和-b，其返回值如下："><a href="#如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数-a-和-b，其返回值如下：" class="headerlink" title="如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下："></a>如果想按照其他标准进行排序，就需要提供比较函数，该函数要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：</h3><h4 id="●-若-a-小于-b，在排序后的数组中-a-应该出现在-b-之前，则返回一个小于-0-的值。"><a href="#●-若-a-小于-b，在排序后的数组中-a-应该出现在-b-之前，则返回一个小于-0-的值。" class="headerlink" title="● 若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。"></a>● 若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。</h4><h4 id="●-若-a-等于-b，则返回-0。"><a href="#●-若-a-等于-b，则返回-0。" class="headerlink" title="● 若 a 等于 b，则返回 0。"></a>● 若 a 等于 b，则返回 0。</h4><h4 id="●-若-a-大于-b，则返回一个大于-0-的值。"><a href="#●-若-a-大于-b，则返回一个大于-0-的值。" class="headerlink" title="● 若 a 大于 b，则返回一个大于 0 的值。"></a>● 若 a 大于 b，则返回一个大于 0 的值。</h4>
          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/03/判断浏览器版本 - 副本/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="邵金东">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="邵金东的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/03/判断浏览器版本 - 副本/" itemprop="url">地址栏解析参数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-03T18:03:02+08:00">
                2018-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>方法一：返回url所有参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">## var queryUrlPar = function (url) &#123; </div><div class="line">        url = url || window.location.href; </div><div class="line">        var reg = /([^?=&amp;]+)=([^?=&amp;]+)/g; </div><div class="line">        var obj = &#123;&#125;; </div><div class="line">        url.replace(reg, function () &#123; </div><div class="line">            obj[arguments[1]] = arguments[2]; </div><div class="line">        &#125;); </div><div class="line">        return obj; </div><div class="line">    &#125; </div><div class="line">```    </div><div class="line">## 方法二：指定需要的参数名和url</div></pre></td></tr></table></figure></p>
<p>var href= location.href=”file:///C:/Users/Administrator/Desktop/demo.html?channel=12”;<br>    console.log(getQuery(‘channel’,href));<br>function getQuery(key, url) {<br>        url = url || window.location.href + ‘’;<br>        if (url.indexOf(‘#’) !== -1) {<br>            url = url.substring(0, url.indexOf(‘#’));<br>        }<br>        var rts = [], rt;<br>        var queryReg = new RegExp(‘(^|\?|&amp;)’ + key + ‘=([^&amp;]*)(?=&amp;|#|$)’, ‘g’);<br>        while ((rt = queryReg.exec(url)) != null) {<br>            rts.push(decodeURIComponent(rt[2]));<br>        }<br>        if (rts.length == 0) return null;<br>        if (rts.length == 1) return rts[0];<br>        return rts;<br>    }<br>```</p>

          
        
      
    </div>
    
    <div>
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="邵金东" />
          <p class="site-author-name" itemprop="name">邵金东</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">邵金东</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_pv">
  本站访客数:<span id="busuanzi_value_site_pv"></span>
</span>
</div>

        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  





  

  

  

  

  

  

  
  <script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  
</body>
</html>
<!-- ҳ������С���� -->
<script type="text/javascript" src="/js/src/love.js"></script>
